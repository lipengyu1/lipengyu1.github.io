<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RedBlackTree | MyBlog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="lpy的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.cdd75a34.css" as="style"><link rel="preload" href="/assets/js/app.b77bd91d.js" as="script"><link rel="preload" href="/assets/js/5.95fafd89.js" as="script"><link rel="preload" href="/assets/js/1.8004d325.js" as="script"><link rel="preload" href="/assets/js/6.9a64070c.js" as="script"><link rel="prefetch" href="/assets/js/10.d2057572.js"><link rel="prefetch" href="/assets/js/100.5ee92836.js"><link rel="prefetch" href="/assets/js/101.c42d6c40.js"><link rel="prefetch" href="/assets/js/102.4cc4aafb.js"><link rel="prefetch" href="/assets/js/103.e2ae2ab4.js"><link rel="prefetch" href="/assets/js/104.27435640.js"><link rel="prefetch" href="/assets/js/105.560c84a4.js"><link rel="prefetch" href="/assets/js/106.5a4cf765.js"><link rel="prefetch" href="/assets/js/107.7626cf3d.js"><link rel="prefetch" href="/assets/js/108.3b10de57.js"><link rel="prefetch" href="/assets/js/109.a0e81730.js"><link rel="prefetch" href="/assets/js/11.21f4368d.js"><link rel="prefetch" href="/assets/js/12.a09fd564.js"><link rel="prefetch" href="/assets/js/13.cb753bda.js"><link rel="prefetch" href="/assets/js/14.cac8a8d9.js"><link rel="prefetch" href="/assets/js/15.a438db96.js"><link rel="prefetch" href="/assets/js/16.4b0695bf.js"><link rel="prefetch" href="/assets/js/17.e00e88a3.js"><link rel="prefetch" href="/assets/js/18.e7e67886.js"><link rel="prefetch" href="/assets/js/19.4ff01257.js"><link rel="prefetch" href="/assets/js/20.25f67462.js"><link rel="prefetch" href="/assets/js/21.7733630a.js"><link rel="prefetch" href="/assets/js/22.4e08b6fc.js"><link rel="prefetch" href="/assets/js/23.6ea04250.js"><link rel="prefetch" href="/assets/js/24.e2da0d90.js"><link rel="prefetch" href="/assets/js/25.a534d6f4.js"><link rel="prefetch" href="/assets/js/26.35aa4ca1.js"><link rel="prefetch" href="/assets/js/27.eed98fd3.js"><link rel="prefetch" href="/assets/js/28.5aa99d4d.js"><link rel="prefetch" href="/assets/js/29.6ebe6a82.js"><link rel="prefetch" href="/assets/js/3.133d4682.js"><link rel="prefetch" href="/assets/js/30.28932870.js"><link rel="prefetch" href="/assets/js/31.03e69fea.js"><link rel="prefetch" href="/assets/js/32.338c87c0.js"><link rel="prefetch" href="/assets/js/33.1dae9eb6.js"><link rel="prefetch" href="/assets/js/34.a93f2c2a.js"><link rel="prefetch" href="/assets/js/35.e7405357.js"><link rel="prefetch" href="/assets/js/36.b46637a5.js"><link rel="prefetch" href="/assets/js/37.93d4f4ef.js"><link rel="prefetch" href="/assets/js/38.bee790ba.js"><link rel="prefetch" href="/assets/js/39.ebfb7888.js"><link rel="prefetch" href="/assets/js/4.c5305843.js"><link rel="prefetch" href="/assets/js/40.df4f0271.js"><link rel="prefetch" href="/assets/js/41.b8e4dec5.js"><link rel="prefetch" href="/assets/js/42.a1f93525.js"><link rel="prefetch" href="/assets/js/43.6041684a.js"><link rel="prefetch" href="/assets/js/44.9563ec90.js"><link rel="prefetch" href="/assets/js/45.6bf87186.js"><link rel="prefetch" href="/assets/js/46.4aaec7b5.js"><link rel="prefetch" href="/assets/js/47.78c12023.js"><link rel="prefetch" href="/assets/js/48.869d79e3.js"><link rel="prefetch" href="/assets/js/49.a764a009.js"><link rel="prefetch" href="/assets/js/50.4856b130.js"><link rel="prefetch" href="/assets/js/51.7bd709d0.js"><link rel="prefetch" href="/assets/js/52.b72beb04.js"><link rel="prefetch" href="/assets/js/53.d84ae00d.js"><link rel="prefetch" href="/assets/js/54.364629ea.js"><link rel="prefetch" href="/assets/js/55.cb9d365f.js"><link rel="prefetch" href="/assets/js/56.7cb864d7.js"><link rel="prefetch" href="/assets/js/57.c63788a3.js"><link rel="prefetch" href="/assets/js/58.af360c05.js"><link rel="prefetch" href="/assets/js/59.e2730c29.js"><link rel="prefetch" href="/assets/js/60.917ecde4.js"><link rel="prefetch" href="/assets/js/61.8766615a.js"><link rel="prefetch" href="/assets/js/62.62c06915.js"><link rel="prefetch" href="/assets/js/63.7d7474c6.js"><link rel="prefetch" href="/assets/js/64.607bafc4.js"><link rel="prefetch" href="/assets/js/65.d75c8339.js"><link rel="prefetch" href="/assets/js/66.17aabf3a.js"><link rel="prefetch" href="/assets/js/67.ea75d796.js"><link rel="prefetch" href="/assets/js/68.0cf80928.js"><link rel="prefetch" href="/assets/js/69.deafd6a3.js"><link rel="prefetch" href="/assets/js/7.12c878df.js"><link rel="prefetch" href="/assets/js/70.6b14ed32.js"><link rel="prefetch" href="/assets/js/71.0dc35275.js"><link rel="prefetch" href="/assets/js/72.e4c8af73.js"><link rel="prefetch" href="/assets/js/73.2ea0d256.js"><link rel="prefetch" href="/assets/js/74.b9e8b353.js"><link rel="prefetch" href="/assets/js/75.34c28988.js"><link rel="prefetch" href="/assets/js/76.dcb700d3.js"><link rel="prefetch" href="/assets/js/77.9f66d64a.js"><link rel="prefetch" href="/assets/js/78.da9ca9c6.js"><link rel="prefetch" href="/assets/js/79.655ae991.js"><link rel="prefetch" href="/assets/js/8.cd9df2b2.js"><link rel="prefetch" href="/assets/js/80.1bfa7f9c.js"><link rel="prefetch" href="/assets/js/81.95c63156.js"><link rel="prefetch" href="/assets/js/82.2c0cede7.js"><link rel="prefetch" href="/assets/js/83.3537c34b.js"><link rel="prefetch" href="/assets/js/84.5cc5808a.js"><link rel="prefetch" href="/assets/js/85.3c5a7bbf.js"><link rel="prefetch" href="/assets/js/86.3d554d84.js"><link rel="prefetch" href="/assets/js/87.819a68b7.js"><link rel="prefetch" href="/assets/js/88.35514086.js"><link rel="prefetch" href="/assets/js/89.07921821.js"><link rel="prefetch" href="/assets/js/9.4805c803.js"><link rel="prefetch" href="/assets/js/90.05271c7f.js"><link rel="prefetch" href="/assets/js/91.99fd62f9.js"><link rel="prefetch" href="/assets/js/92.be0ea552.js"><link rel="prefetch" href="/assets/js/93.4bb9023a.js"><link rel="prefetch" href="/assets/js/94.15fcabbf.js"><link rel="prefetch" href="/assets/js/95.1dd63304.js"><link rel="prefetch" href="/assets/js/96.3037abca.js"><link rel="prefetch" href="/assets/js/97.7476c904.js"><link rel="prefetch" href="/assets/js/98.0ea6a565.js"><link rel="prefetch" href="/assets/js/99.b4d763b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cdd75a34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>MyBlog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>lpy的个人博客</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>lpy</span>
            
          <span data-v-25ba6db2>2019 - </span>
          2024
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="MyBlog" class="logo"> <span class="site-name">MyBlog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/SpringCloud/" class="nav-link"><i class="undefined"></i>
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/categories/Redis/" class="nav-link"><i class="undefined"></i>
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hadoop/" class="nav-link"><i class="undefined"></i>
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hive/" class="nav-link"><i class="undefined"></i>
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/git/" class="nav-link"><i class="undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/Swagger/" class="nav-link"><i class="undefined"></i>
  Swagger
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/RedBlackTree/" class="nav-link"><i class="undefined"></i>
  RedBlackTree
</a></li><li class="dropdown-item"><!----> <a href="/categories/面试/" class="nav-link"><i class="undefined"></i>
  面试
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Pytorch/" class="nav-link"><i class="undefined"></i>
  Pytorch
</a></li><li class="dropdown-item"><!----> <a href="/categories/ML/" class="nav-link"><i class="undefined"></i>
  ML
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/JDBC/" class="nav-link"><i class="undefined"></i>
  JDBC
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaEE/" class="nav-link"><i class="undefined"></i>
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Maven/" class="nav-link"><i class="undefined"></i>
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/categories/Springboot/" class="nav-link"><i class="undefined"></i>
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/categories/JUC/" class="nav-link"><i class="undefined"></i>
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/categories/elasticsearch/" class="nav-link"><i class="undefined"></i>
  elasticsearch
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blogs/" class="nav-link router-link-active"><i class="iconfont reco-message"></i>
  Java
</a></div><div class="nav-item"><a href="/docs/category7_SSM.html" class="nav-link"><i class="iconfont reco-message"></i>
  框架
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      架构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/jiagou/spirngcloud/" class="nav-link"><i class="undefined"></i>
  SpirngCloud
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/weifuwu/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/fenbushi/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li></ul></div></div><div class="nav-item"><a href="/docs/code-life/" class="nav-link"><i class="iconfont reco-message"></i>
  程序人生
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    lpy
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>98</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>73</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/SpringCloud/" class="nav-link"><i class="undefined"></i>
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/categories/Redis/" class="nav-link"><i class="undefined"></i>
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hadoop/" class="nav-link"><i class="undefined"></i>
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hive/" class="nav-link"><i class="undefined"></i>
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/git/" class="nav-link"><i class="undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/Swagger/" class="nav-link"><i class="undefined"></i>
  Swagger
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/RedBlackTree/" class="nav-link"><i class="undefined"></i>
  RedBlackTree
</a></li><li class="dropdown-item"><!----> <a href="/categories/面试/" class="nav-link"><i class="undefined"></i>
  面试
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Pytorch/" class="nav-link"><i class="undefined"></i>
  Pytorch
</a></li><li class="dropdown-item"><!----> <a href="/categories/ML/" class="nav-link"><i class="undefined"></i>
  ML
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/JDBC/" class="nav-link"><i class="undefined"></i>
  JDBC
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaEE/" class="nav-link"><i class="undefined"></i>
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Maven/" class="nav-link"><i class="undefined"></i>
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/categories/Springboot/" class="nav-link"><i class="undefined"></i>
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/categories/JUC/" class="nav-link"><i class="undefined"></i>
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/categories/elasticsearch/" class="nav-link"><i class="undefined"></i>
  elasticsearch
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blogs/" class="nav-link router-link-active"><i class="iconfont reco-message"></i>
  Java
</a></div><div class="nav-item"><a href="/docs/category7_SSM.html" class="nav-link"><i class="iconfont reco-message"></i>
  框架
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      架构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/jiagou/spirngcloud/" class="nav-link"><i class="undefined"></i>
  SpirngCloud
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/weifuwu/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/fenbushi/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li></ul></div></div><div class="nav-item"><a href="/docs/code-life/" class="nav-link"><i class="iconfont reco-message"></i>
  程序人生
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>RedBlackTree</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>lpy</span>
            
          <span data-v-25ba6db2>2019 - </span>
          2024
        </a></span></div></div> <div data-v-1aefc0b4><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">RedBlackTree</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>lpy</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>10/12/2022</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/blogs/category18_RBT/RedBlackTree.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>RedBlackTree</span></i></div></div> <div class="theme-reco-content content__default"><h3 id="红黑树"><a href="#红黑树" class="header-anchor">#</a> 红黑树</h3> <h2 id="本文的介绍次序"><a href="#本文的介绍次序" class="header-anchor">#</a> 本文的介绍次序</h2> <p>本文，从 BST二叉查找树， 到AVL 平衡二叉树， 再到 RBT 红黑树， 为大家 做好清晰的场景分析， 帮助大家记忆。</p> <h2 id="bst二叉查找树"><a href="#bst二叉查找树" class="header-anchor">#</a> BST二叉查找树</h2> <h3 id="什么是二叉查找树呢"><a href="#什么是二叉查找树呢" class="header-anchor">#</a> 什么是二叉查找树呢？</h3> <p>二叉查找树（BST）具备以下特性：</p> <p>左子树上所有结点的值均小于或等于它的根结点的值。
右子树上所有结点的值均大于或等于它的根结点的值。
左、右子树也分别为二叉排序树。</p> <h3 id="二叉搜索树-bst的完美情况"><a href="#二叉搜索树-bst的完美情况" class="header-anchor">#</a> 二叉搜索树 BST的完美情况</h3> <p>一般人们理解的二叉树（又叫二叉搜索树 BST）会出现一个问题，完美的情况下，它是这样的：</p> <p><img src="/assets/img/rbt01.1d36f3d3.png" alt=""></p> <h3 id="二叉搜索树的查找流程"><a href="#二叉搜索树的查找流程" class="header-anchor">#</a> 二叉搜索树的查找流程</h3> <p>如何查找值为7的节点？</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.查看根节点8，因为7&lt;8，所以再查看它的左子节点6
2.查看左子节点6，因为7&gt;6，所以再查看它的右子节点7
3.查看右子节点7，因为7=7，所以就找到了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="二叉搜索树的极端情况"><a href="#二叉搜索树的极端情况" class="header-anchor">#</a> 二叉搜索树的极端情况</h3> <p>二叉查找树是有缺点的，在不断插入的时候，**有可能出现这样一种情况：**很容易“退化”成链表，</p> <p>如果bst 树的节点正好从大到小的插入，此时树的结构也类似于链表结构，这时候的查询或写入耗时与链表相同。</p> <h4 id="退化成为了-链表的特殊bst"><a href="#退化成为了-链表的特殊bst" class="header-anchor">#</a> 退化成为了 链表的特殊BST</h4> <p>一颗特殊BST，退化成为了 链表，如下图：</p> <p><img src="/assets/img/rbt02.4ed9e41a.png" alt=""></p> <p>它和链表一样，搜索的时候，最坏情况的时间复杂度O(n) 。</p> <h4 id="那么我们怎么避免这种情况呢"><a href="#那么我们怎么避免这种情况呢" class="header-anchor">#</a> 那么我们怎么避免这种情况呢？</h4> <p>为了避免这种特殊的情况发生，引入了平衡二叉树（AVL）和红黑树（red-black tree）。</p> <p>AVL 、rbt 都是通过本身的建树原则来控制树的层数和节点位置，</p> <p>因为rbtree是由AVL演变而来，所以我们从了解AVL开始。</p> <h2 id="avl平衡二叉树"><a href="#avl平衡二叉树" class="header-anchor">#</a> AVL平衡二叉树</h2> <p>平衡二叉树也叫AVL（发明者名字简写），也属于二叉搜索树的一种，与其不同的是AVL通过机制保证其自身的平衡。</p> <p>AVL树是最先发明的自平衡二叉查找树。</p> <p>在AVL树中任何节点的两个子树的高度最大差别为1，所以它也被称为高度平衡树。</p> <p>增加和删除可能需要通过一次或多次树旋转来重新平衡这个树。</p> <h3 id="avl树的特性"><a href="#avl树的特性" class="header-anchor">#</a> AVL树的特性</h3> <p>AVL树本质上还是一棵二叉搜索树，它有以下特性：</p> <p>特性1： 对于任何一颗子树的root根结点而言，它的左子树任何节点的key一定比root小，而右子树任何节点的key 一定比root大；</p> <p>特性2：对于AVL树而言，其中任何子树仍然是AVL树；</p> <p>特性3：每个节点的左右子节点的高度之差的绝对值最多为1；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>特性1表明，AVL 继承于 BST , 所以:

1.AVL本身首先是一棵BST 二叉搜索树。
2.AVL带有平衡条件：每个结点的左右子树的高度之差的绝对值（平衡因子）最多为1。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在插入、删除树节点的时候，如果破坏了以上的原则，AVL树会自动进行调整使得以上三条原则仍然成立。</p> <p>也就是说，AVL树，本质上是带了平衡功能的二叉查找树（二叉排序树，二叉搜索树）。</p> <h3 id="avl树的平衡功能"><a href="#avl树的平衡功能" class="header-anchor">#</a> AVL树的平衡功能</h3> <p>举个例子，下左图为AVL树最长的2节点与最短的8节点高度差为1；</p> <p>当插入一个新的节点后，根据上面第一条原则，它会出现在2节点的左子树，但这样一来就违反了原则3。</p> <p><img src="/assets/img/rbt03.a1569e61.png" alt=""></p> <p>此时AVL树会通过节点的旋转进行进行平衡，</p> <p>AVL调整的过程称之为左旋和右旋，</p> <h3 id="avl平衡的调整过程"><a href="#avl平衡的调整过程" class="header-anchor">#</a> AVL平衡的调整过程</h3> <p>旋转之前，首先确定旋转支点（pivot）： 这个旋转支点就是失去平衡这部分树，在自平衡之后的根节点，</p> <p>平衡的调整过程，需要根据pivot它来进行旋转。</p> <p>我们在学习AVL树的旋转时，不要将失衡问题扩大到整个树来看，这样会扰乱你的思路，</p> <p>我们只关注失衡子树的根结点 及它的子节点和孙子节点即可。</p> <p>事实上，AVL树的旋转，我们权且叫“AVL旋转”是有规律可循的，因为只要聚焦到**失衡子树，**然后进行左旋、右旋即可。</p> <p>很多人在左旋和右旋有时候弄不明白，</p> <p>其实左旋就是逆时针转，右旋是顺时针转</p> <h2 id="avl子树失衡的四大场景"><a href="#avl子树失衡的四大场景" class="header-anchor">#</a> AVL子树失衡的四大场景</h2> <p>导致AVL失衡的场景就是有限的4个：</p> <p>左左结构失衡（LL型失衡）</p> <p>右右结构失衡（RR型失衡）</p> <p>左右结构失衡（LR型失衡）</p> <p>右左结构失衡（RL型失衡）</p> <p>删除元素，也会导致AVL失衡，需要再平衡，但是原理和插入元素是类似的。</p> <p>这里聚焦 介绍插入元素的平衡过程， 删除元素，不做介绍。</p> <h3 id="场景1-ll型失衡-左左结构失衡-右旋"><a href="#场景1-ll型失衡-左左结构失衡-右旋" class="header-anchor">#</a> 场景1: LL型失衡-左左结构失衡（右旋）：</h3> <p>场景： 插入的元素在子树root的左侧不平衡元素的左侧</p> <p>此时，以root的左儿为支点，也就是，左侧的不平衡元素为pivot(支点), 进行右旋</p> <p><img src="/assets/img/rbt04.1614f429.png" alt=""></p> <p>来一个右旋的动画：</p> <p>右旋过程中，如果pivot有右子树，则作为 原root的 左子树， 保障AVL的特性1</p> <h4 id="记忆要点"><a href="#记忆要点" class="header-anchor">#</a> 记忆要点</h4> <p>尼恩备注记忆要点，LL型失衡怎么 平衡呢？</p> <p>旋转的反向，与失衡的方向相反，</p> <p>LL 型失衡，与左边 相反的方向， 是右边，所以是右旋</p> <h3 id="场景2-rr型失衡-右右结构失衡-左旋"><a href="#场景2-rr型失衡-右右结构失衡-左旋" class="header-anchor">#</a> 场景2 RR型失衡：右右结构失衡（左旋）</h3> <p>场景：插入的元素在子树root右侧的不平衡子树的右侧</p> <p>此时，以root的右儿为支点，也就是，右侧的不平衡元素 为 pivot(支点)， 进行左旋</p> <p><img src="/assets/img/rbt06.c06a7e44.png" alt=""></p> <p>来一个左旋的动画：</p> <p>左旋过程中，如果pivot有左子树，则作为 原root的 右子树，</p> <p>保障AVL的特性1，</p> <h4 id="记忆要点-2"><a href="#记忆要点-2" class="header-anchor">#</a> 记忆要点</h4> <p>尼恩备注记忆要点，RR型失衡怎么 平衡呢？</p> <p>旋转的反向，与失衡的方向相反，</p> <p>RR 型失衡，与右边 相反的方向， 是左边，所以是左旋</p> <h3 id="场景3-lr型失衡-左右结构失衡-左旋-右旋"><a href="#场景3-lr型失衡-左右结构失衡-左旋-右旋" class="header-anchor">#</a> 场景3 LR型失衡：左右结构失衡（左旋+右旋）：</h3> <p>场景： 插入的元素在左侧的不平衡元素的右侧</p> <p><img src="/assets/img/rbt08.7fcc88e3.png" alt=""></p> <h4 id="记忆要点-3"><a href="#记忆要点-3" class="header-anchor">#</a> 记忆要点</h4> <p>尼恩备注记忆要点，LR型失衡怎么 平衡呢？</p> <p>旋转的反向，与失衡的方向相反，</p> <p>LR型失衡，与只相反的方向是 RL，但是先旋转底部，再旋转顶部，RL进行次序颠倒，LR</p> <p>所以， LR型失衡，旋转的方式，是先左旋， 再右旋</p> <h3 id="场景4-rl失衡-右左结构-右旋-左旋"><a href="#场景4-rl失衡-右左结构-右旋-左旋" class="header-anchor">#</a> 场景4 RL失衡: 右左结构 （右旋+左旋）：</h3> <p>场景： 插入的元素在右侧的不平衡元素的左侧</p> <p><img src="/assets/img/rbt09.dcd882a4.png" alt=""></p> <h4 id="记忆要点-4"><a href="#记忆要点-4" class="header-anchor">#</a> 记忆要点</h4> <p>尼恩备注记忆要点，RL型失衡怎么 平衡呢？</p> <p>旋转的反向，与失衡的方向相反，</p> <p>RL型失衡，与只相反的方向是 LR，但是先旋转底部，再旋转顶部，所以，LR进行次序颠倒，RL</p> <p>最终， RL型失衡，旋转的方式，是先右旋， 再左旋</p> <h3 id="avl树平衡总结"><a href="#avl树平衡总结" class="header-anchor">#</a> AVL树平衡总结</h3> <p>可见无论哪种情况的失衡，都可以通过旋转来调整。</p> <p>不难看出，旋转在图上像是将pivot(支点)节点向上提（将它提升为root节点），而后两边的节点会物理的分布在新root节点的两边，</p> <p>接下来按照AVL二叉树的要求：</p> <p>左子树小于root，右子树大于root进行调整。</p> <p>从图LL结构可以看出，当右旋时原来pivot（7）的右子树（8）会转变到原root点（9）的左子树处；</p> <p><img src="/assets/img/rbt10.1614f429.png" alt=""></p> <p>从图右右结构可见，当左旋时，原来pivot（18）的左子树会分布到原root点（9）的右子树。</p> <p><img src="/assets/img/rbt11.c06a7e44.png" alt=""></p> <p>对于左右结构和右左结构无非是经过多次旋转达到稳定，旋转的方式并没有区别，</p> <p>AVL树本质上还是一棵二叉搜索树，它有以下特性：</p> <ol><li>本身首先是一棵二叉搜索树。</li> <li>带有平衡条件：每个结点的左右子树的高度之差的绝对值（平衡因子）最多为1。</li></ol> <p>也就是说，AVL树，本质上是带了平衡功能的二叉查找树（二叉排序树，二叉搜索树）。</p> <h3 id="avl树的删除"><a href="#avl树的删除" class="header-anchor">#</a> AVL树的删除</h3> <p>删除的判断标准</p> <p>要删除的节点是什么类型的节点？；
删除后是否会破坏平衡 ；
节点类型</p> <p>叶子节点；
节点只有左子树或只有右子树 ；
既有左右子树都有。
处理的思路</p> <p>当删除为叶子节点，则直接删除，并从父亲节点开始往上看，判断是否失衡；如果没有失衡，再判断父亲的父节点是否失衡，直到根节点。若失衡则判断失衡类型（LL、LR、RR、RL），再进行相应的调整。
删除的节点只有左子树或只有右子树，那么将节点删除，以左子树或右子树进行代替，并进行相应的平衡判断，若失衡则调整，一直到根节点 ；
删除的节点既有左子树又有右子树，找到其前驱或者后驱节点将其替换，再判断是否失衡，然后根据失衡情况调整，直到根节点。</p> <h2 id="常见avl面试题"><a href="#常见avl面试题" class="header-anchor">#</a> 常见AVL面试题</h2> <h3 id="问-什么是avl左旋和右旋"><a href="#问-什么是avl左旋和右旋" class="header-anchor">#</a> 问：什么是AVL左旋和右旋？</h3> <p>加入节点后，左旋和右旋 ，维护AVL平衡性</p> <p>右旋转</p> <p>场景： 插入的元素在不平衡元素的左侧的左侧</p> <p>x.right = y</p> <p>y.left = xxx(原x.right)</p> <p>对节点y进行向右旋转操作，返回旋转后新的根节点x</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>            y                             x
           / \                          /   \
          x   T4     向右旋转 (y)        z     y
         / \       - - - - - - - -&gt;    / \   / \
        z   T3                       T1  T2 T3 T4
       / \
     T1   T2



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>场景：插入的元素在不平衡元素的右侧的右侧</p> <p>// 向左旋转过程</p> <p>x.left = y;</p> <p>y.right =(原x.left )</p> <p>对节点y进行向左旋转操作，返回旋转后新的根节点x</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>        y                             x
      /  \                          /   \
     T1   x      向左旋转 (y)       y     z
         / \   - - - - - - - -&gt;   / \   / \
       T2  z                     T1 T2 T3 T4
          / \
         T3 T4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="avl树的问题"><a href="#avl树的问题" class="header-anchor">#</a> AVL树的问题</h3> <p>既然AVL树可以保证二叉树的平衡，这就意味着AVL搜索的时候，它最坏情况的时间复杂度O(logn) ，要低于普通二叉树BST和链表的最坏情况O(n)。</p> <p>那么HashMap直接使用AVL树来替换链表就好了，为什么选择用红黑树呢？</p> <p>原因是：</p> <p><code>由于AVL树必须保证左右子树平衡，Max(最大树高-最小树高) &lt;= 1，</code></p> <p>所以在插入的时候很容易出现不平衡的情况，一旦这样，就需要进行旋转以求达到平衡。</p> <p>正是由于这种严格的平衡条件，导致AVL需要花大量时间在调整上，故AVL树一般使用场景在于查询场景， 而不是 增加删除 频繁的场景。</p> <p>红黑树(rbt)做了什么优化呢？</p> <p>红黑树(rbt)继承了AVL可自平衡的优点，</p> <p>同时, 红黑树(rbt)在查询速率和平衡调整中寻找平衡，放宽了树的平衡条件，从而可以用于 增加删除 频繁的场景。</p> <p>在实际应用中，红黑树的使用要多得多。</p> <h2 id="红黑树-rbtree"><a href="#红黑树-rbtree" class="header-anchor">#</a> 红黑树（RBTree）</h2> <p>红黑树是一种特化的AVL树（平衡二叉树）</p> <p>红黑树是在1972年由Rudolf Bayer发明的，当时被称为平衡二叉B树（symmetric binary B-trees）.</p> <p>在1978年被 Leo J. Guibas 和 Robert Sedgewick 修改为如今的红黑树.</p> <h3 id="什么是红黑树"><a href="#什么是红黑树" class="header-anchor">#</a> 什么是红黑树？</h3> <p>红黑树也是一种自平衡二叉查找树，它与AVL树类似，都在添加和删除的时候通过旋转操作保持二叉树的平衡，以求更高效的查询性能。</p> <p>与AVL树相比，红黑树牺牲了部分平衡性，以换取插入/删除操作时较少的旋转操作，整体来说性能要优于AVL树。</p> <p>虽然RBTree是复杂的, 但它的最坏情况运行时间也是非常良好的,并且在实践中是高效的：</p> <p>它可以在O(log n)时间内做查找,插入和删除,这里的n 是树中元素的数目.</p> <h3 id="红黑树的特性"><a href="#红黑树的特性" class="header-anchor">#</a> 红黑树的特性</h3> <p>红黑树是实际应用中最常用的平衡二叉查找树，它不严格的具有平衡属性，但平均的使用性能非常良好。</p> <p>在红黑树中，节点被标记为红色和黑色两种颜色。</p> <p>红黑树的原则有以下几点：</p> <p>特性1：节点非黑即红</p> <p>特性2：根节点一定是黑色</p> <p>特性3：叶子节点（NIL）一定是黑色</p> <p>特性4：每个红色节点的两个子节点都为黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)</p> <p>特性5：从任一节点到其每个叶子的所有路径，都包含相同数目的黑色节点。</p> <p>红色属性 说明，红色节点的孩子，一定是黑色。 但是，RBTree 黑色节点的孩子，可以是红色，也可以是黑色，具体如下图。</p> <p>叶子属性 说明， 叶子节点可以是空nil ，AVL的叶子节点不是空的，具体如下图。</p> <p><img src="/assets/img/rbt12.8a000475.png" alt=""></p> <p>基于上面的原则，我们一般在插入红黑树节点的时候，会将这个节点设置为红色，</p> <p>原因参照最后一条原则： 红色破坏原则的可能性最小，如果是黑色, 很可能导致这条支路的黑色节点比其它支路的要多1，破坏了平衡。</p> <p>记忆要点：
可以按照括号里边的分类，记住 红黑树的几个原则：</p> <p>（颜色属性）性质1：节点非黑即红</p> <p>（根属性）性质2：根节点一定是黑色</p> <p>（叶子属性）性质3：叶子节点（NIL）一定是黑色</p> <p>（红色属性）性质4：每个红色节点的两个子节点，都为黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)</p> <p>**（黑色属性）性质5：**从任一节点到其每个叶子的所有路径，都包含相同数目的黑色节点。</p> <p>黑色属性，可以理解为平衡特征， 如果满足不了平衡特征，就要进行平衡操作。</p> <p>空间换时间</p> <p>RBT有点属于一种空间换时间类型的优化，</p> <p>在avl的节点上，增加了 颜色属性的 数据，相当于 增加了空间的消耗。 通过颜色属性的增加， 换取，后面平衡操作的次数 减少。</p> <h3 id="黑色完美平衡"><a href="#黑色完美平衡" class="header-anchor">#</a> 黑色完美平衡</h3> <p>红黑树并不是一颗AVL平衡二叉搜索树，从图上可以看到，根节点P的左子树显然比右子树高</p> <p>根据 红黑树的特性5，从任一节点到其每个叶子的所有路径，都包含相同数目的黑色节点， 说明：</p> <p>rbt 的 左子树和右子树的黑节点的层数是相等的</p> <p>红黑树的平衡条件，不是以整体的高度来约束的，而是以黑色 节点的 高度，来约束的。</p> <p>所以称红黑树这种平衡为黑色完美平衡。</p> <p><img src="/assets/img/rbt13.6b222add.png" alt=""></p> <p>看看黑色完美平衡的效果，</p> <p>去掉 rbt中的红色节点，会得到 一个四叉树， 从根节点到每一个叶子，高度相同，就是rbt的root到叶子的黑色路径长度。</p> <p><img src="/assets/img/rbt14.cb216c12.png" alt=""></p> <h2 id="红黑树的恢复平衡过程的三个操作"><a href="#红黑树的恢复平衡过程的三个操作" class="header-anchor">#</a> 红黑树的恢复平衡过程的三个操作</h2> <p>一旦红黑树5个原则有不满足的情况，我们视为平衡被打破，如何 恢复平衡？</p> <p>靠它的三种操作：变色、左旋、右旋。</p> <h3 id="_1-变色"><a href="#_1-变色" class="header-anchor">#</a> 1.变色</h3> <p>节点的颜色由红变黑或由黑变红。（这个操作很好了解）</p> <h3 id="_2-左旋"><a href="#_2-左旋" class="header-anchor">#</a> 2.左旋</h3> <p>以某个结点作为支点(pivot)，其父节点（子树的root）旋转为自己的左子树（左旋），pivot的原左子树变成 原root节点的 右子树，pivot的原右子树保持不变。</p> <p><img src="/assets/img/rbt16.c06a7e44.png" alt=""></p> <h3 id="_3-右旋"><a href="#_3-右旋" class="header-anchor">#</a> 3.右旋：</h3> <p>以某个结点作为 支点(pivot)，其父节点（子树的root）旋转为自己的右子树（右旋），pivot的原右子树变成 原root节点的 左子树，pivot的原左子树保持不变。</p> <p><img src="/assets/img/rbt18.1614f429.png" alt=""></p> <p>红黑树的左旋、右旋操作，AVL树的左旋，右旋操作 差不多</p> <h2 id="红黑树插入节点情景分析"><a href="#红黑树插入节点情景分析" class="header-anchor">#</a> 红黑树插入节点情景分析</h2> <h3 id="红黑树的节点结构"><a href="#红黑树的节点结构" class="header-anchor">#</a> 红黑树的节点结构</h3> <p>先看看红黑树的节点结构</p> <p>以HashMap中的红黑树的结构定义为例子：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
  static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
        final int hash;
        final K key;
        volatile V val;
        volatile Node&lt;K,V&gt; next;
        }


/**

 * Nodes for use in TreeBins
   */
   static final class TreeNode&lt;K,V&gt; extends Node&lt;K,V&gt; {
   TreeNode&lt;K,V&gt; parent;  // red-black tree links
   TreeNode&lt;K,V&gt; left;
   TreeNode&lt;K,V&gt; right;
   TreeNode&lt;K,V&gt; prev;    // needed to unlink next upon deletion
   boolean red;

   TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next,
            TreeNode&lt;K,V&gt; parent) {
       super(hash, key, val, next);
       this.parent = parent;
   }


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>默认新插入的节点为红色：
因为父节点为黑色的概率较大，插入新节点为红色，可以避免颜色冲突</p> <h3 id="场景1-红黑树为空树"><a href="#场景1-红黑树为空树" class="header-anchor">#</a> 场景1：红黑树为空树</h3> <p>直接把插入结点作为根节点就可以了</p> <p>另外：根据红黑树性质 2根节点是黑色的。还需要把插入节点设置为黑色。</p> <h3 id="场景2-插入节点的key已经存在"><a href="#场景2-插入节点的key已经存在" class="header-anchor">#</a> 场景2：插入节点的Key已经存在</h3> <p>更新当前节点的值，为插入节点的值。</p> <p><img src="/assets/img/rbt19.f063f6fd.png" alt=""></p> <h3 id="情景3-插入节点的父节点为黑色"><a href="#情景3-插入节点的父节点为黑色" class="header-anchor">#</a> 情景3：插入节点的父节点为黑色</h3> <p>由于插入的节点是红色的，当插入节点的父节点是黑色时，不会影响红黑树的平衡，</p> <p>所以： 直接插入无需做自平衡。</p> <p><img src="/assets/img/rbt20.f40e0886.png" alt=""></p> <h3 id="情景4-插入节点的父节点为红色"><a href="#情景4-插入节点的父节点为红色" class="header-anchor">#</a> 情景4：插入节点的父节点为红色</h3> <p>根据性质2：根节点是黑色。</p> <p>如果插入节点的父节点为红色节点，那么该父节点不可能为根节点，所以插入节点总是存在祖父节点(三代关系)。</p> <p>根据性质4：每个红色节点的两个子节点一定是黑色的。不能有两个红色节点相连。</p> <p>此时会出现两种状态：</p> <p>父亲和叔叔为红色</p> <p>父亲为红色，叔叔为黑色</p> <p>如图</p> <p><img src="/assets/img/rbt21.9a5f0bee.png" alt=""></p> <h4 id="场景4-1-父亲和叔叔为红色节点"><a href="#场景4-1-父亲和叔叔为红色节点" class="header-anchor">#</a> 场景4.1：父亲和叔叔为红色节点</h4> <p>根据性质4：<code>红色节点不能相连 ==》祖父节点肯定为黑色节点：</code></p> <p>父亲为红色，那么此时该插入子树的红黑树层数的情况是：黑红红。</p> <p>因为不可能同时存在两个相连的红色节点，需要进行 变色， 显然处理方式是把其改为：红黑红</p> <p><code>变色 处理：黑红红 ==&gt; 红黑红</code></p> <p>1.将F和V节点改为黑色</p> <p>2.将P改为红色</p> <p>3.将P设置为当前节点，进行后续处理</p> <p><img src="/assets/img/rbt22.e138028a.png" alt=""></p> <p>可以看到，将P设置为红色了，</p> <p>如果P的父节点是黑色，那么无需做处理；</p> <p>但如果P的父节点是红色，则违反红黑树性质了，所以需要将P设置为当前节点，继续插入操作, 作自平衡处理，直到整体平衡为止。</p> <h4 id="场景4-2-叔叔为黑色-父亲为红色-并且插在父亲的左节点"><a href="#场景4-2-叔叔为黑色-父亲为红色-并且插在父亲的左节点" class="header-anchor">#</a> 场景4.2：叔叔为黑色，父亲为红色，并且插在父亲的左节点</h4> <p>分为两种情况</p> <p>LL 红色插入
叔叔为黑色，或者不存在（NIL）也是黑节点，并且节点的父亲节点是祖父节点的左子节点</p> <p>注意：单纯从插入来看，叔叔节点非红即黑(NIL节点)，否则破坏了红黑树性质5，此时路径会比其他路径多一个黑色节点。</p> <p><img src="/assets/img/rbt23.4d76873d.png" alt=""></p> <h5 id="场景4-2-1-ll型失衡"><a href="#场景4-2-1-ll型失衡" class="header-anchor">#</a> 场景4.2.1 LL型失衡</h5> <p>细分场景 1： 新插入节点，为其父节点的左子节点(LL红色情况)， 插入后 就是LL 型失衡</p> <p><img src="/assets/img/rbt24.a0782cc6.png" alt=""></p> <p>自平衡处理：
1.变颜色：</p> <p>将F设置为黑色，将P设置为红色</p> <p>2.对F节点进行右旋</p> <p><img src="/assets/img/rbt25.e979081c.png" alt=""></p> <h5 id="场景4-2-2-lr型失衡"><a href="#场景4-2-2-lr型失衡" class="header-anchor">#</a> 场景4.2.2 LR型失衡</h5> <p>细分场景 2： 新插入节点，为其父节点的右子节点(LR红色情况)， 插入后 就是LR 型失衡</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>自平衡处理：
1.对F进行左旋</p> <p>2.将F设置为当前节点，得到LL红色情况</p> <p>3.按照LL红色情况处理(1.变色 2.右旋P节点)</p> <p><img src="/assets/img/rbt27.e9dcf732.png" alt=""></p> <h4 id="情景4-3-叔叔为黑节点-父亲为红色-并且父亲节点是祖父节点的右子节点"><a href="#情景4-3-叔叔为黑节点-父亲为红色-并且父亲节点是祖父节点的右子节点" class="header-anchor">#</a> 情景4.3：叔叔为黑节点，父亲为红色，并且父亲节点是祖父节点的右子节点</h4> <p><img src="/assets/img/rbt28.fec06b42.png" alt=""></p> <h5 id="情景4-3-1-rr型失衡"><a href="#情景4-3-1-rr型失衡" class="header-anchor">#</a> 情景4.3.1：RR型失衡</h5> <p>新插入节点，为其父节点的右子节点(RR红色情况)</p> <p><img src="/assets/img/rbt29.75febfae.png" alt=""></p> <p>自平衡处理：
1.变色：</p> <p>将F设置为黑色，将P设置为红色</p> <p>2.对P节点进行左旋</p> <p><img src="/assets/img/rbt32.0d92f4cf.png" alt=""></p> <h5 id="情景4-3-2-rl型失衡"><a href="#情景4-3-2-rl型失衡" class="header-anchor">#</a> 情景4.3.2：RL型失衡</h5> <p>新插入节点，为其父节点的左子节点(RL红色情况)</p> <p><img src="/assets/img/rbt30.f19478fc.png" alt=""></p> <p>自平衡处理：
1.对F进行右旋</p> <p>2.将F设置为当前节点，得到RR红色情况</p> <p>3.按照RR红色情况处理(1.变色 2.左旋 P节点)</p> <p><img src="/assets/img/rbt31.1fe5771a.png" alt=""></p> <h2 id="rbt面试题"><a href="#rbt面试题" class="header-anchor">#</a> RBT面试题：</h2> <h3 id="问-有了二叉搜索树-为什么还需要平衡二叉树"><a href="#问-有了二叉搜索树-为什么还需要平衡二叉树" class="header-anchor">#</a> 问：有了二叉搜索树，为什么还需要平衡二叉树？</h3> <p>二叉搜索树容易退化成一条链</p> <p>这时，查找的时间复杂度从O ( log n）也将退化成O ( N )</p> <p>引入对左右子树高度差有限制的平衡二叉树 AVL，保证查找操作的最坏时间复杂度也为O ( log n）</p> <h3 id="问-有了平衡二叉树-为什么还需要红黑树"><a href="#问-有了平衡二叉树-为什么还需要红黑树" class="header-anchor">#</a> 问：有了平衡二叉树，为什么还需要红黑树？</h3> <p>AVL的左右子树高度差不能超过1，每次进行插入/删除操作时，几乎都需要通过旋转操作保持平衡</p> <p>在频繁进行插入/删除的场景中，频繁的旋转操作使得AVL的性能大打折扣</p> <p>红黑树通过牺牲严格的平衡，换取插入/删除时少量的旋转操作，</p> <p>整体性能优于AVL</p> <p>红黑树插入时的不平衡，不超过两次旋转就可以解决；删除时的不平衡，不超过三次旋转就能解决</p> <p>红黑树的红黑规则，保证最坏的情况下，也能在O ( log n）时间内完成查找操作。</p> <h3 id="问-红黑树那几个原则-你还记得么"><a href="#问-红黑树那几个原则-你还记得么" class="header-anchor">#</a> 问：红黑树那几个原则，你还记得么？</h3> <p>可以按照括号里边的分类，记住 红黑树的几个原则：</p> <p>（颜色属性）节点非黑即红</p> <p>（根属性）根节点一定是黑色</p> <p>（叶子属性）叶子节点（NIL）一定是黑色</p> <p>（红色属性）每个红色节点的两个子节点，都为黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)</p> <p>**（黑色属性）**从任一节点到其每个叶子的所有路径，都包含相同数目的黑色节点。</p> <h3 id="问-红黑树写入操作-是如何找到它的父节点的"><a href="#问-红黑树写入操作-是如何找到它的父节点的" class="header-anchor">#</a> 问：红黑树写入操作 ，是如何找到它的父节点的？</h3> <p>红黑树的节点 TreeNode它就是继承Node结构，</p> <p>先看看红黑树的节点结构</p> <p>以HashMap中的红黑树的结构定义为例子：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
        <span class="token keyword">volatile</span> <span class="token class-name">V</span> val<span class="token punctuation">;</span>
        <span class="token keyword">volatile</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


<span class="token comment">/**

 * Nodes for use in TreeBins
   */</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
   <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> parent<span class="token punctuation">;</span>  <span class="token comment">// red-black tree links</span>
   <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> left<span class="token punctuation">;</span>
   <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> right<span class="token punctuation">;</span>
   <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>    <span class="token comment">// needed to unlink next upon deletion</span>
   <span class="token keyword">boolean</span> red<span class="token punctuation">;</span>

   <span class="token class-name">TreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> val<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">,</span>
            <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>TreeNode在Node基础上加了几个字段，分别指向父节点parent，然后指向左子节点left，还有指向右子节点的right，</p> <p>然后还有表示颜色red属性</p> <p>红黑树的插入操作：
首先是找到一个合适的插入点，就是找到插入节点的父节点，</p> <p>由于红黑树 它又满足BST二叉查找树的 有序特性，这个找父节点的操作和二叉查找树是完全一致的。</p> <p>二叉查找树，左子节点小于当前节点，右子节点大于当前节点，</p> <p>然后每一次向下查找一层就可以排除掉一半的数据，查找的效率在log(N)</p> <p>最终查找到nil节点或者 key一样的节点。</p> <p>如果最终查找到 key一样的节点，进行更新操作。这个TreeNode.key 与当前 put.key 完全一致。这就不需要插入，替换value就可以了，父节点就是当前节点的父节点</p> <p>如果最终查找到nil节点，进行插入操作。nil节点的父节点，就是当前节点的父节点，把插入的节点替换nil节点。然后进行红黑树的 平衡处理。</p> <h3 id="问-红黑树的有那些内部操作"><a href="#问-红黑树的有那些内部操作" class="header-anchor">#</a> 问：红黑树的有那些内部操作</h3> <p>变色</p> <p>把一个红色的节点变成黑色，或者把一个黑色的节点变成红色，就是对这个节点的变色。</p> <p>旋转</p> <p>与平衡二叉树的旋转操作类似。</p> <h3 id="红黑树与avl树区别"><a href="#红黑树与avl树区别" class="header-anchor">#</a> 红黑树与AVL树区别</h3> <p>1、调整平衡的实现机制不同</p> <p>红黑树根据路径上黑色节点数目一致，来确定是否失衡，如果失衡，就通过变色和旋转来恢复</p> <p>AVL根据树的平衡因子(所有节点的左右子树高度差的绝对值不超过1)，来确定是否失衡，如果失衡，就通过旋转来恢复</p> <p>2、红黑树的插入效率更高</p> <p>红黑树是用非严格的平衡来换取增删节点时候旋转次数的降低，任何不平衡都会在三次旋转之内解决，</p> <p>红黑树并不追求“完全平衡”，它只要求部分地达到平衡要求，降低了对旋转的要求，从而提高了性能</p> <p>而AVL是严格平衡树(高度平衡的二叉搜索树)，因此在增加或者删除节点的时候，根据不同情况，旋转的次数比红黑树要多。</p> <p>所以红黑树的插入效率更高</p> <p>3、红黑树统计性能比AVL树更高</p> <p>红黑树能够以O(log n) 的时间复杂度进行查询、插入、删除操作。</p> <p>AVL树查找、插入和删除在平均和最坏情况下都是O(log n)。</p> <p>红黑树的算法时间复杂度和AVL相同，但统计性能比AVL树更高，</p> <p>4、适用性：AVL查找效率高</p> <p>如果你的应用中，查询的次数远远大于插入和删除，那么选择AVL树，如果查询和插入删除次数几乎差不多，应选择红黑树。</p> <p>即，有时仅为了排序（建立-遍历-删除），不查找或查找次数很少，R-B树合算一些。</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-cb1513f6></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.b77bd91d.js" defer></script><script src="/assets/js/5.95fafd89.js" defer></script><script src="/assets/js/1.8004d325.js" defer></script><script src="/assets/js/6.9a64070c.js" defer></script>
  </body>
</html>

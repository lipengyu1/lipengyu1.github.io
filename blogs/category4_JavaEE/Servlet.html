<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Servlet | MyBlog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="lpy的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.cdd75a34.css" as="style"><link rel="preload" href="/assets/js/app.b77bd91d.js" as="script"><link rel="preload" href="/assets/js/5.95fafd89.js" as="script"><link rel="preload" href="/assets/js/1.8004d325.js" as="script"><link rel="preload" href="/assets/js/22.4e08b6fc.js" as="script"><link rel="prefetch" href="/assets/js/10.d2057572.js"><link rel="prefetch" href="/assets/js/100.5ee92836.js"><link rel="prefetch" href="/assets/js/101.c42d6c40.js"><link rel="prefetch" href="/assets/js/102.4cc4aafb.js"><link rel="prefetch" href="/assets/js/103.e2ae2ab4.js"><link rel="prefetch" href="/assets/js/104.27435640.js"><link rel="prefetch" href="/assets/js/105.560c84a4.js"><link rel="prefetch" href="/assets/js/106.5a4cf765.js"><link rel="prefetch" href="/assets/js/107.7626cf3d.js"><link rel="prefetch" href="/assets/js/108.3b10de57.js"><link rel="prefetch" href="/assets/js/109.a0e81730.js"><link rel="prefetch" href="/assets/js/11.21f4368d.js"><link rel="prefetch" href="/assets/js/12.a09fd564.js"><link rel="prefetch" href="/assets/js/13.cb753bda.js"><link rel="prefetch" href="/assets/js/14.cac8a8d9.js"><link rel="prefetch" href="/assets/js/15.a438db96.js"><link rel="prefetch" href="/assets/js/16.4b0695bf.js"><link rel="prefetch" href="/assets/js/17.e00e88a3.js"><link rel="prefetch" href="/assets/js/18.e7e67886.js"><link rel="prefetch" href="/assets/js/19.4ff01257.js"><link rel="prefetch" href="/assets/js/20.25f67462.js"><link rel="prefetch" href="/assets/js/21.7733630a.js"><link rel="prefetch" href="/assets/js/23.6ea04250.js"><link rel="prefetch" href="/assets/js/24.e2da0d90.js"><link rel="prefetch" href="/assets/js/25.a534d6f4.js"><link rel="prefetch" href="/assets/js/26.35aa4ca1.js"><link rel="prefetch" href="/assets/js/27.eed98fd3.js"><link rel="prefetch" href="/assets/js/28.5aa99d4d.js"><link rel="prefetch" href="/assets/js/29.6ebe6a82.js"><link rel="prefetch" href="/assets/js/3.133d4682.js"><link rel="prefetch" href="/assets/js/30.28932870.js"><link rel="prefetch" href="/assets/js/31.03e69fea.js"><link rel="prefetch" href="/assets/js/32.338c87c0.js"><link rel="prefetch" href="/assets/js/33.1dae9eb6.js"><link rel="prefetch" href="/assets/js/34.a93f2c2a.js"><link rel="prefetch" href="/assets/js/35.e7405357.js"><link rel="prefetch" href="/assets/js/36.b46637a5.js"><link rel="prefetch" href="/assets/js/37.93d4f4ef.js"><link rel="prefetch" href="/assets/js/38.bee790ba.js"><link rel="prefetch" href="/assets/js/39.ebfb7888.js"><link rel="prefetch" href="/assets/js/4.c5305843.js"><link rel="prefetch" href="/assets/js/40.df4f0271.js"><link rel="prefetch" href="/assets/js/41.b8e4dec5.js"><link rel="prefetch" href="/assets/js/42.a1f93525.js"><link rel="prefetch" href="/assets/js/43.6041684a.js"><link rel="prefetch" href="/assets/js/44.9563ec90.js"><link rel="prefetch" href="/assets/js/45.6bf87186.js"><link rel="prefetch" href="/assets/js/46.4aaec7b5.js"><link rel="prefetch" href="/assets/js/47.78c12023.js"><link rel="prefetch" href="/assets/js/48.869d79e3.js"><link rel="prefetch" href="/assets/js/49.a764a009.js"><link rel="prefetch" href="/assets/js/50.4856b130.js"><link rel="prefetch" href="/assets/js/51.7bd709d0.js"><link rel="prefetch" href="/assets/js/52.b72beb04.js"><link rel="prefetch" href="/assets/js/53.d84ae00d.js"><link rel="prefetch" href="/assets/js/54.364629ea.js"><link rel="prefetch" href="/assets/js/55.cb9d365f.js"><link rel="prefetch" href="/assets/js/56.7cb864d7.js"><link rel="prefetch" href="/assets/js/57.c63788a3.js"><link rel="prefetch" href="/assets/js/58.af360c05.js"><link rel="prefetch" href="/assets/js/59.e2730c29.js"><link rel="prefetch" href="/assets/js/6.9a64070c.js"><link rel="prefetch" href="/assets/js/60.917ecde4.js"><link rel="prefetch" href="/assets/js/61.8766615a.js"><link rel="prefetch" href="/assets/js/62.62c06915.js"><link rel="prefetch" href="/assets/js/63.7d7474c6.js"><link rel="prefetch" href="/assets/js/64.607bafc4.js"><link rel="prefetch" href="/assets/js/65.d75c8339.js"><link rel="prefetch" href="/assets/js/66.17aabf3a.js"><link rel="prefetch" href="/assets/js/67.ea75d796.js"><link rel="prefetch" href="/assets/js/68.0cf80928.js"><link rel="prefetch" href="/assets/js/69.deafd6a3.js"><link rel="prefetch" href="/assets/js/7.12c878df.js"><link rel="prefetch" href="/assets/js/70.6b14ed32.js"><link rel="prefetch" href="/assets/js/71.0dc35275.js"><link rel="prefetch" href="/assets/js/72.e4c8af73.js"><link rel="prefetch" href="/assets/js/73.2ea0d256.js"><link rel="prefetch" href="/assets/js/74.b9e8b353.js"><link rel="prefetch" href="/assets/js/75.34c28988.js"><link rel="prefetch" href="/assets/js/76.dcb700d3.js"><link rel="prefetch" href="/assets/js/77.9f66d64a.js"><link rel="prefetch" href="/assets/js/78.da9ca9c6.js"><link rel="prefetch" href="/assets/js/79.655ae991.js"><link rel="prefetch" href="/assets/js/8.cd9df2b2.js"><link rel="prefetch" href="/assets/js/80.1bfa7f9c.js"><link rel="prefetch" href="/assets/js/81.95c63156.js"><link rel="prefetch" href="/assets/js/82.2c0cede7.js"><link rel="prefetch" href="/assets/js/83.3537c34b.js"><link rel="prefetch" href="/assets/js/84.5cc5808a.js"><link rel="prefetch" href="/assets/js/85.3c5a7bbf.js"><link rel="prefetch" href="/assets/js/86.3d554d84.js"><link rel="prefetch" href="/assets/js/87.819a68b7.js"><link rel="prefetch" href="/assets/js/88.35514086.js"><link rel="prefetch" href="/assets/js/89.07921821.js"><link rel="prefetch" href="/assets/js/9.4805c803.js"><link rel="prefetch" href="/assets/js/90.05271c7f.js"><link rel="prefetch" href="/assets/js/91.99fd62f9.js"><link rel="prefetch" href="/assets/js/92.be0ea552.js"><link rel="prefetch" href="/assets/js/93.4bb9023a.js"><link rel="prefetch" href="/assets/js/94.15fcabbf.js"><link rel="prefetch" href="/assets/js/95.1dd63304.js"><link rel="prefetch" href="/assets/js/96.3037abca.js"><link rel="prefetch" href="/assets/js/97.7476c904.js"><link rel="prefetch" href="/assets/js/98.0ea6a565.js"><link rel="prefetch" href="/assets/js/99.b4d763b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cdd75a34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>MyBlog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>lpy的个人博客</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>lpy</span>
            
          <span data-v-25ba6db2>2019 - </span>
          2024
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="MyBlog" class="logo"> <span class="site-name">MyBlog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/SpringCloud/" class="nav-link"><i class="undefined"></i>
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/categories/Redis/" class="nav-link"><i class="undefined"></i>
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hadoop/" class="nav-link"><i class="undefined"></i>
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hive/" class="nav-link"><i class="undefined"></i>
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/git/" class="nav-link"><i class="undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/Swagger/" class="nav-link"><i class="undefined"></i>
  Swagger
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/RedBlackTree/" class="nav-link"><i class="undefined"></i>
  RedBlackTree
</a></li><li class="dropdown-item"><!----> <a href="/categories/面试/" class="nav-link"><i class="undefined"></i>
  面试
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Pytorch/" class="nav-link"><i class="undefined"></i>
  Pytorch
</a></li><li class="dropdown-item"><!----> <a href="/categories/ML/" class="nav-link"><i class="undefined"></i>
  ML
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/JDBC/" class="nav-link"><i class="undefined"></i>
  JDBC
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaEE/" class="nav-link"><i class="undefined"></i>
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Maven/" class="nav-link"><i class="undefined"></i>
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/categories/Springboot/" class="nav-link"><i class="undefined"></i>
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/categories/JUC/" class="nav-link"><i class="undefined"></i>
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/categories/elasticsearch/" class="nav-link"><i class="undefined"></i>
  elasticsearch
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blogs/" class="nav-link router-link-active"><i class="iconfont reco-message"></i>
  Java
</a></div><div class="nav-item"><a href="/docs/category7_SSM.html" class="nav-link"><i class="iconfont reco-message"></i>
  框架
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      架构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/jiagou/spirngcloud/" class="nav-link"><i class="undefined"></i>
  SpirngCloud
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/weifuwu/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/fenbushi/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li></ul></div></div><div class="nav-item"><a href="/docs/code-life/" class="nav-link"><i class="iconfont reco-message"></i>
  程序人生
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    lpy
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>98</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>73</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/SpringCloud/" class="nav-link"><i class="undefined"></i>
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/categories/Redis/" class="nav-link"><i class="undefined"></i>
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hadoop/" class="nav-link"><i class="undefined"></i>
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/categories/Hive/" class="nav-link"><i class="undefined"></i>
  Hive
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/git/" class="nav-link"><i class="undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/Swagger/" class="nav-link"><i class="undefined"></i>
  Swagger
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/RedBlackTree/" class="nav-link"><i class="undefined"></i>
  RedBlackTree
</a></li><li class="dropdown-item"><!----> <a href="/categories/面试/" class="nav-link"><i class="undefined"></i>
  面试
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Pytorch/" class="nav-link"><i class="undefined"></i>
  Pytorch
</a></li><li class="dropdown-item"><!----> <a href="/categories/ML/" class="nav-link"><i class="undefined"></i>
  ML
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/JDBC/" class="nav-link"><i class="undefined"></i>
  JDBC
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaEE/" class="nav-link"><i class="undefined"></i>
  JavaEE
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Maven/" class="nav-link"><i class="undefined"></i>
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/categories/Springboot/" class="nav-link"><i class="undefined"></i>
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/categories/JUC/" class="nav-link"><i class="undefined"></i>
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/categories/elasticsearch/" class="nav-link"><i class="undefined"></i>
  elasticsearch
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blogs/" class="nav-link router-link-active"><i class="iconfont reco-message"></i>
  Java
</a></div><div class="nav-item"><a href="/docs/category7_SSM.html" class="nav-link"><i class="iconfont reco-message"></i>
  框架
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      架构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/jiagou/spirngcloud/" class="nav-link"><i class="undefined"></i>
  SpirngCloud
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/weifuwu/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/docs/jiagou/fenbushi/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li></ul></div></div><div class="nav-item"><a href="/docs/code-life/" class="nav-link"><i class="iconfont reco-message"></i>
  程序人生
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Servlet</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>lpy</span>
            
          <span data-v-25ba6db2>2019 - </span>
          2024
        </a></span></div></div> <div data-v-1aefc0b4><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">Servlet</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>lpy</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>4/6/2022</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/blogs/category4_JavaEE/Servlet.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>Servlet</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="http概述"><a href="#http概述" class="header-anchor">#</a> HTTP概述</h2> <p>HTTP协议（超文本传输协议），是一个客户端请求和响应的标准协议，规定了浏览器和万维网服务器之间相互通信的规则。用户输入地址和端口号之后就可以从服务器上取得所需要的网页信息。</p> <p>客户端发送给服务器的格式叫请求协议，服务器发送给你客户端的格式叫响应协议。</p> <p>Response Header 响应头</p> <p>Request Header 请求头</p> <p>HTTP默认端口号：80<br></p> <h3 id="书写格式"><a href="#书写格式" class="header-anchor">#</a> 书写格式</h3> <p>协议名：//IP地址：端口号/项目路径/项目资源？参数</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">HTTP</span><span class="token punctuation">:</span><span class="token header-value">//127.0.0.1:8080/myweb/servlet01?name=zhangsan</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="http协议特点"><a href="#http协议特点" class="header-anchor">#</a> HTTP协议特点</h3> <ul><li>支出客户/服务器模式</li> <li>简单快速，请求时只需传送方法与路径</li> <li>灵活，允许传输任意类型的数据对象，有Content-Type标记</li> <li>无连接，无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间，并且可以提高并发性能，不能和每个用户建立长久的连接，请求一次相应一次。</li> <li>无状态，无状态(stateless)协议。HTTP协议 自身不对请求和响应之间的通信状态进行保存。也就是说在HTTP这个 级别,协议对于发送过的请求或响应都不做持久化处理。</li></ul> <h3 id="url"><a href="#url" class="header-anchor">#</a> URL</h3> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//host[:port]/[abc_path]</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//IP(主机名/域名):端口/访问的资源路径</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>http表示要通过HTTP协议定位网络资源</li> <li>host表示合法的主机名或IP</li> <li>port指定一个端口号，为空则使用缺省端口80</li> <li>abs_path指定请求资源的URL；如果URL中没有给出abs_path，那个当他作为请求URL时，必须以“/&quot;的形式给出，通常这个工作浏览器自动帮我们完成。</li></ul> <h3 id="http请求"><a href="#http请求" class="header-anchor">#</a> HTTP请求</h3> <p>http请求由三部分组成：请求行、请求头、请求正文</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>请求行
请求头1
请求头2 
请求空行
请求体
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="消息头"><a href="#消息头" class="header-anchor">#</a> 消息头</h3> <p>HTTP消息由客户端到服务器的请求和服务器到客户端的响应组成。请求消息和响应消息都是由开始行(对于请求消息，开始行就是请求行，对于响应消息，开始行就是状态行)，消息报头(可选) ,空行(只有CRLF的行)，消息正文(可选)组成。</p> <p>每一个报头域都是由名字+&quot;:”+空格+值组成,消息报头域的名字是大小写无关的。</p> <ul><li>请求头</li></ul> <p>请求报头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息。</p> <p>Referer: 该请求头指明请求从哪里来.</p> <p>如果是地址栏中输入地址访问的都没有该请求头地址栏输入地址,通过请求可以看到，此时多了-一个Referer的请求头，并且后面的值为该请求从哪里发出。比如:百度竞价，只能从百度来的才有效果，否则不算;通常用来做统计工作、防盗链。</p> <ul><li>响应头</li></ul> <p>响应报头允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对Request URI所标识的资源进行下一步访问的信息。</p> <ul><li>location：location响应报头域用于重定向接受者到一个新的位置</li></ul> <p>​	Location响应报头域，常用在更换域名时</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>response.sendRedirect(&quot;http://www.baidu.com&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>refresh：自动跳转，可以=在页面通过meta标签实现，也可在后台实现</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>refresh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3;url=http://www.baidu.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="idea2021创建java-web项目"><a href="#idea2021创建java-web项目" class="header-anchor">#</a> IDEA2021创建Java web项目</h2> <h3 id="_1-1-创建java项目"><a href="#_1-1-创建java项目" class="header-anchor">#</a> 1.1 创建Java项目</h3> <ol><li><strong>File</strong> -&gt; <strong>New</strong> -&gt; <strong>Project</strong> -&gt; <strong>Java</strong>。</li> <li>然后一直下一步，输入好项目名，选择好 <strong>JavaWeb</strong> 项目目录点击完成。</li></ol> <h3 id="_1-2-给-java-项目添加-javaweb-支持"><a href="#_1-2-给-java-项目添加-javaweb-支持" class="header-anchor">#</a> 1.2 给 Java 项目添加 JavaWeb 支持</h3> <ol><li>右键项目模块，点击 <strong>Add Framework Support</strong>。</li> <li>选择 <strong>Web Application(4.0)</strong>，默认版本为 4.0，勾选创建 web.xml。</li> <li>在 <strong>web</strong> 目录下的 <strong>WEB-INF</strong> 里创建库文件夹 <strong>lib</strong>。</li> <li>右键项目模块，点击 <strong>Open Module Settings</strong>，点击 Modules-&gt; <strong>Dependencies</strong> -&gt; +号，点击 <strong>JARs or Directories…</strong>。</li> <li>选择刚才创建的库目录 <strong>lib</strong>,选择所选文件的类别为 <strong>Jar Directory</strong>，然后点击确定。</li></ol> <h3 id="_1-3-设置项目编码为-utf-8"><a href="#_1-3-设置项目编码为-utf-8" class="header-anchor">#</a> 1.3 设置项目编码为 UTF-8</h3> <ol><li>点击 <strong>File</strong> -&gt; <strong>Settings</strong></li> <li>点击 <strong>Editor</strong> -&gt; <strong>File Encodings</strong> <ul><li>Global Encoding：UTF-8</li> <li>Project Encoding：UTF-8</li> <li>Default encoding for properties files：UTF-8</li></ul></li></ol> <h3 id="_1-4-设置控制台输出编码为-utf-8"><a href="#_1-4-设置控制台输出编码为-utf-8" class="header-anchor">#</a> 1.4 设置控制台输出编码为 UTF-8</h3> <ol><li>点击 <strong>Editor</strong> -&gt; <strong>General</strong> -&gt; <strong>Console</strong> <ul><li>Default Encoding：UTF-8</li></ul></li></ol> <h3 id="_1-5-配置-tomcat-服务"><a href="#_1-5-配置-tomcat-服务" class="header-anchor">#</a> 1.5 配置 Tomcat 服务</h3> <ol><li>点击顶部右上角的 <strong>ADD CONFIGURATION</strong></li> <li>点击左上角的 <strong>+</strong> 号，滑到底部，选择 <strong>Tomcat Server</strong> -&gt; <strong>Local</strong></li> <li>填写Tomcat名称，选择 <strong>Server</strong> -&gt; <strong>CONFIGURE…</strong>，在这里选择你的 <strong>Tomcat 服务器</strong> 文件夹目录，然后点击确定</li></ol> <h3 id="_1-6-将-tomcat-的包添加到项目中"><a href="#_1-6-将-tomcat-的包添加到项目中" class="header-anchor">#</a> 1.6 将 Tomcat 的包添加到项目中</h3> <ol><li>JavaWeb 项目默认是不自带 Servlet 相关的包，在配置完 Tomcat 服务器后，需手动把 Tomcat 添加到引
用当中</li> <li>点击 <strong>File</strong> -&gt; <strong>Project Structure</strong></li> <li>点击 <strong>Modules</strong> -&gt; <strong>Dependencies</strong> -&gt; <strong>+</strong> -&gt; <strong>Library</strong></li> <li>选择 <strong>Tomcat 服务器</strong> ,添加。</li></ol> <h2 id="idea2019创建java-web项目"><a href="#idea2019创建java-web项目" class="header-anchor">#</a> IDEA2019创建Java web项目</h2> <ol><li><p>新建项目，选中 java Enterprise，配置jdk，Application Server选择tomcat，勾选Web Application案例，注意勾选生成web.xml文件，创建。</p></li> <li><p>创建class文件和lib文件夹<br>
点击项目的WEF-INF文件夹 ,右键，New → Directory 创建两个文件夹，classes(用来存放编译后输出的class文件) 和 lib(用于存放第三方jar包)</p></li> <li><p>配置classes文件夹路径<br></p> <p>File → 选择 Project Structure → 选择 Module → 选择Paths → 选择 “Use module compile output path” -&gt; 将Output path和Test output path都选择刚刚创建的classes文件夹</p></li> <li><p>配置lib文件夹路径
  点击Paths旁边的Dependencies 点击右边的”+”号 → 选择”Jars or Directories” -&gt; 将Output path和Test output path都选择刚刚创建的classes文件夹 → 选择”Jar Directory” ,ok</p></li> <li><p>tomcat部署</p></li></ol> <p>测试</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>jws<span class="token punctuation">.</span></span><span class="token class-name">WebService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 创建Servlet步骤
 * 1. 创建普通Java类
 * 2. 满足Servlet规范：继承HttpServlet类
 * 3. 重写service方法，当请求servlet类时，，会自动调用service方法
 * 4. 设置servlet对外访问路径
 *      @WebServlet(&quot;/ser02&quot;)
 *      注：括号内为路径，注意/
 */</span>
<span class="token comment">//@WebServlet(&quot;/ser01&quot;)</span>
<span class="token comment">//@WebServlet(value = {&quot;/ser01&quot;})</span>
<span class="token comment">//@WebServlet(value = {&quot;/ser01&quot;,&quot;/ser001&quot;})</span>
<span class="token comment">//@WebServlet(urlPatterns = &quot;/ser01&quot;)</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/ser01&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/ser001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>name <span class="token operator">=</span> <span class="token string">&quot;servlet01&quot;</span><span class="token punctuation">,</span>loadOnStartup <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//设置响应类型</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//响应数据</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h3&gt;hello&lt;/h3&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>实现Servlet接口与继承HttpServlet区别
实现Servlet接口：需要将其所有的抽象方法实现
继承HttpServlet：只需要重写类中的一个或多个方法即可</p> <p>HttpServlet底层为实现servlet接口</p> <h2 id="servlet的两种映射方式"><a href="#servlet的两种映射方式" class="header-anchor">#</a> Servlet的两种映射方式</h2> <p>第一种：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>在web.xml中配置&lt;servlet-name&gt;、&lt;servlet-class&gt;、&lt;servlet-name&gt;、&lt;url-pattern&gt;等信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>第二种：使用@WebServlet注解</p> <p>举例：</p> <p>第一种：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.servlet.TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>第二种：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/TestServlet&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="练习1"><a href="#练习1" class="header-anchor">#</a> 练习1</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//@WebServlet(&quot;/hi&quot;)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//request代表请求对象，浏览器到服务器请求发送数据</span>
        <span class="token comment">//response代表响应对象，服务器返回浏览器的响应数据</span>

        <span class="token comment">//获取请求中携带的参数信息,注意属性名</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> department <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;dep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置编码格式</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//获取输出流</span>
        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;下午好&quot;</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token string">&quot;&lt;h2 style='text-align:center;color:red'&gt;下午好，&quot;</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">&quot;他来自&quot;</span><span class="token operator">+</span>department<span class="token operator">+</span><span class="token string">&quot;学院&quot;</span><span class="token operator">+</span><span class="token string">&quot;&lt;/h2&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html1 <span class="token operator">=</span> <span class="token string">&quot;&lt;h2 style='text-align:center;color:green'&gt;下午好，welcome&lt;/h2&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//将含有html标签的字符串打印到浏览器上，会解析为标签控件</span>
        printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>html<span class="token operator">+</span>html1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//localhost:8080/hi?name=张三&amp;dep=大数据</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//@WebServlet(&quot;/first&quot;)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;这是firstServlet的响应&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.test.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/hi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>first<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.test.servlet.FirstServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>first<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/first<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="两种请求方式get、post"><a href="#两种请求方式get、post" class="header-anchor">#</a> 两种请求方式GET、POST</h2> <p><img src="/assets/img/servlet01.cc5a37dd.png" alt="servlet01.png"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/student&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> age <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sex <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dep <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;dep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">&quot;--&quot;</span><span class="token operator">+</span>age<span class="token operator">+</span><span class="token string">&quot;--&quot;</span><span class="token operator">+</span>sex<span class="token operator">+</span><span class="token string">&quot;--&quot;</span><span class="token operator">+</span>dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html1 <span class="token operator">=</span> <span class="token string">&quot;&lt;h3 style='text-align:center;color:red'&gt;学生姓名：&quot;</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">&quot;&lt;/h3&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html2 <span class="token operator">=</span> <span class="token string">&quot;&lt;h3 style='text-align:center;color:red'&gt;学生年龄：&quot;</span><span class="token operator">+</span>age<span class="token operator">+</span><span class="token string">&quot;&lt;/h3&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html3 <span class="token operator">=</span> <span class="token string">&quot;&lt;h3 style='text-align:center;color:red'&gt;学生性别：&quot;</span><span class="token operator">+</span>sex<span class="token operator">+</span><span class="token string">&quot;&lt;/h3&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html4 <span class="token operator">=</span> <span class="token string">&quot;&lt;h3 style='text-align:center;color:red'&gt;学生院系：&quot;</span><span class="token operator">+</span>dep<span class="token operator">+</span><span class="token string">&quot;&lt;/h3&gt;&quot;</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>html1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>html2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>html3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>html4<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------get请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------post请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:8080/student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> aqua</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>学生信息提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lable</span><span class="token punctuation">&gt;</span></span>姓名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lable</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lable</span><span class="token punctuation">&gt;</span></span>年龄：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lable</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lable</span><span class="token punctuation">&gt;</span></span>性别：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lable</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>男<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checked<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>男
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>女<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>女 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lable</span><span class="token punctuation">&gt;</span></span>院系:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lable</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dep<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>系1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>系1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>系2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>系2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>系3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>系3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>系4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>系4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>系5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>系5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="servlet的工作流程"><a href="#servlet的工作流程" class="header-anchor">#</a> Servlet的工作流程</h2> <ul><li>通过请求头获知浏览器访问的是哪个主机</li> <li>再通过请求行获取访问的是哪一个web应用</li> <li>再通过请求行中的请求路径获知访问的是哪个路径</li> <li>通过获取的资源路径在配置中匹配到真实的路径</li> <li>服务器会创建servlet对象（如果是第一次访问时，创建servlet实例，并调用init方法进行初始化操作）</li> <li>调用service（request，response）方法来处理请求和响应的操作</li> <li>调用service完毕后返回服务器，由服务器将response缓冲区的数据取出，以http相应的格式发送给浏览器</li></ul> <h2 id="servlet的生命周期"><a href="#servlet的生命周期" class="header-anchor">#</a> Servlet的生命周期</h2> <p>Servlet没有main（）方法，不能独立运行，它的运行完全由Servlet引擎来控制和调度。所谓生命周期，指的是servlet容器何时创建servlet实例、何时调用其方法进行请求的处理、何时销毁其实例的整个过程。</p> <ul><li>实例和初始化时机</li></ul> <p>当请求达容器时，容器查找该servlet对象是否存在。如果不存在，则会创建实例并进行初始化</p> <ul><li>就绪/调用/服务阶段</li></ul> <p>有请求到达容器，容器调用servlet对象的service（）方法，处理请求的方法在整个生命周期中可以被多次调用；</p> <p>HttpServlet的Servlet方法，会依据请求的方式来调用doGet（）、doPost（）方法。但是，这两个do方法默认情况下，会抛出异常，需要子类去重写。</p> <ul><li>销毁时机</li></ul> <p>当容器关闭时（应用程序停止时），会将程序中的Servlet实例进行销毁</p> <p>上述的生命周期可以通过Servlet中的生命周期方法来观察。在Servlet中有三个生命周期方法，不由于用户手动调用，而是在特定的时机有容器自动调用，观察这三个生命周期方法即可观察到Servlet的生命周期。</p> <p>init方法，在Servlet实例创建之后执行（证明该Servlet有实例创建了）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet init...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>sercive方法，每次有请求到达某个Servlet方法时执行，用来处理请求（证明该servlet进行服务了）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet02 service...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>destroy方法，servlet实例销毁时执行（证明该servlet的实例被销毁了）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet02 destroy...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 1.装载Web.xml文件——tomcat启动的时候扫描web.xml、注解、确定servlet与url地址的绑定关系
 * 2.创建servlet——第一次访问servlet对应的url地址时候，会创建servlet对象，调用构造方法和初始化方法（init），才能提供服务
 * 3.servlet的service（）\get（）\post（）为请求提供服务
 * 4.销毁servlet对象——Tomcat重启或者关闭会调用destroy()方法进行servlet对象销毁
 *
 * 第二次访问servlet是不会重新创建servlet对象，Tomcat全局只能有一个servlet对象
 * 在servlet中，无论是get/post方式提交过来的请求都会经过service方法来处理，然后转到对象的get/post方法上
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;TestServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">TestServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用TestServlet的构造方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用TestServlet的init方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用TestServlet的service方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用TestServlet的doPost方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用TestServlet的doGet方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用TestServlet的destroy方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>Servlet的生命周期，简单的概括为四步/三步：（Servlet类加载-&gt;实例化）-&gt;服务-&gt;销毁。</p> <ol><li>Web Client向Servlet容器(Tomcat)发出 Http 请求</li> <li>Servlet容器接收web Client的请求</li> <li>servlet容器创建一个HttpservletRequest对象，将web client 请求的信息封装到这个对象中</li> <li>Servlet 容器创建一个HttpservletResponse对象</li> <li>Servlet 容器调HttpServlet对象service方法,把Request与Response作为参数，传给HttpServlet</li> <li>HttpServlet 调用HttpSeruletRequest对象的有关方法，获取 Http请求信息</li> <li>HttpServlet 调用HttpServletRespanse对象的有关方法,生成响应数据</li> <li>Servlet容器把Hitpservlet的响应结果传给web client</li></ol> <p><img src="/assets/img/servlet02.50ee7fed.png" alt="servlet02.png"></p> <h2 id="httpservletrequest对象"><a href="#httpservletrequest对象" class="header-anchor">#</a> HttpServletRequest对象</h2> <p>HttpServletRequest对象:主要作用是用来接收客户端发送过来的请求信息，例如:请求的参数，发送的头信息等都属于客户端发来的信息，service()方法中形参接收的是 HttpServletRequest 接口的实例化对象，表示该对象主要应用在 HTTP协议上，该对象是由Tomcat封装好传递过来。</p> <p>HttpServletRequest是ServletRequest的子接口，ServletRequest 只有一个子接口，就是HttpServletRequest。既然只有一个子接口为什么不将两个接口合并为一个?从长远上讲:现在主要用的协议是HTTP协议，但以后可能出现更多新的协议。若以后想要支持这种新协议，只需要直接继承ServletRequest接口就行了。</p> <p>在HttpServletRequest接口中，定义的方法很多，但都是围绕接收客户端参数的。但是怎么拿到该对象呢?不需要，直接在Service方法中由容器传入过来，而我们需要做的就是取出对象中的数据，进行分析、处理。</p> <h3 id="常用方法"><a href="#常用方法" class="header-anchor">#</a> 常用方法</h3> <ol><li>获取请求的方式（GET\POST结束）</li> <li>获取请求的完整路径（从http开始，到？结束）</li> <li>获取请求的部分路径（从端口号（项目路径）开始，到？结束）</li> <li>获取请求的参数字符串（从？开始，到最后）</li> <li>获取请求的协议版本</li> <li>获取项目的访问路径（站点名）</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//GET</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//http://localhost:8080/servlet01/ser04</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">///servlet01/ser04</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//username=zhangsan&amp;userPwd=123456</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getProtocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//HTTP/1.1</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">///servlet01    </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="获取请求的参数"><a href="#获取请求的参数" class="header-anchor">#</a> 获取请求的参数</h3> <ol><li><p>获取指定参数名的参数
getParameter（&quot;参数名&quot;）</p> <div class="language- extra-class"><pre><code> 1. 表单提交&lt;br&gt;
      参数名表示的是表单元素的name属性值&lt;br&gt;
      1. 地址栏输入&lt;br&gt;
      数名表示的是&quot;？键=值&amp;键=值&quot;中的键//?username=lisi&amp;userPwd=123456&lt;br&gt;
</code></pre></div></li> <li><p>获取指定参数名的所有参数值<br></p> <p>​	getParameterValue（&quot;参数名&quot;）<br>
​	request.getparameter(&quot;参数名&quot;)<br></p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token class-name">String</span> uname <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;姓名：&quot;</span> <span class="token operator">+</span> uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> upwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;密码：&quot;</span> <span class="token operator">+</span> upwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="请求乱码问题"><a href="#请求乱码问题" class="header-anchor">#</a> 请求乱码问题</h3> <p>乱码原因，request默认解析编码iso—8859-1不支持中文，中文参数乱码</p> <p>解决方案：</p> <ol><li>只针对POST请求的乱码问题</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code> req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>针对任意请求方式都有效（一次处理一个参数）</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">String</span>（request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;参数名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getByte（”ISO<span class="token operator">-</span><span class="token number">8859</span><span class="token operator">-</span><span class="token number">1</span>“），”UTF<span class="token operator">-</span><span class="token number">8</span>“）<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="请求转发-跳转方式"><a href="#请求转发-跳转方式" class="header-anchor">#</a> 请求转发（跳转方式）</h3> <p>一种跳转方式</p> <ol><li>服务端跳转</li> <li>地址栏不会发生该表</li> <li>只有一次请求</li> <li>数据可以共享</li></ol> <h3 id="request作用域"><a href="#request作用域" class="header-anchor">#</a> request作用域</h3> <p>只在一次请求中有效，只在请求转发跳转有效</p> <ol><li>request.setAttribute(&quot;参数名&quot;,&quot;参数值&quot;)；设置作用域，可以是任意类型的数据</li> <li>request.getAttribute(&quot;参数名&quot;)；获取指定作用域中的值</li> <li>remove.removeAttribute(&quot;参数名&quot;)；删除指定作用域值</li></ol> <div class="language-jsp line-numbers-mode"><pre class="language-text"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;$Title$&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
&lt;%--  &lt;h2&gt;${username}登陆成功&lt;/h2&gt;--%&gt;
  &lt;%
    //获取作用域中的值
    String name = (String) request.getAttribute(&quot;username&quot;);
  %&gt;
&lt;h2&gt;&lt;%=name%&gt;，欢迎登陆&lt;/h2&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-jsp line-numbers-mode"><pre class="language-text"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;用户登陆-&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form method=&quot;get&quot; action=&quot;ser04&quot;&gt;
        姓名：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;
        密码：&lt;input type=&quot;password&quot; name=&quot;userPwd&quot;&gt;&lt;br&gt;
        爱好：
            &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;sing&quot;&gt;唱
            &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;dance&quot;&gt;跳
            &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;rap&quot;&gt;rap
            &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;basket&quot;&gt;篮球
        &lt;br&gt;
        &lt;button&gt;登陆&lt;/button&gt;${msg}
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * HttpServletRequest对象
 * 1. 常用方法
 *  获取请求路径
 * 2. 获取请求的参数
 *      request.getparameter(&quot;参数名&quot;)
 * 3. 请求乱码问题
 *  乱码原因，request默认解析编码iso—8859-1不支持中文，中文参数乱码
 *  解决方案：
 *      1. 只针对POST请求的乱码问题
 *          request.setCharacterEncoding(&quot;UTF-8&quot;);
 *      2. 针对任意请求方式都有效（一次处理一个参数）
 *          new String（request.getParameter(&quot;参数名&quot;).getByte（”ISO-8859-1“），”UTF-8“）;
 * 4. 请求转发（跳转方式）
 *      一种跳转方式
 *      1. 服务端跳转
 *      2. 地址栏不会发生该表
 *      3. 只有一次请求
 *      4. 数据可以共享
 * 5. request作用域
 *      只在一次请求中有效，只在请求转发跳转有效
 *      request.setAttribute(&quot;参数名&quot;,&quot;参数值&quot;)；设置作用域，可以是任意类型的数据
 *      request。getAttribute(&quot;参数名&quot;)；获取指定作用域中的值
 *      remove。removeAttribute(&quot;参数名&quot;)；删除指定作用域值
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/ser04&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet04</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//中文乱码问题(只针对POST有效)</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * 常用方法
         * 1. 获取请求的方式（GET\POST结束）
         * 2. 获取请求的完整路径（从http开始，到？结束）
         * 3. 获取请求的部分路径（从端口号（项目路径）开始，到？结束）
         * 4. 获取请求的参数字符串（从？开始，到最后）
         * 5. 获取请求的协议版本
         * 6. 获取项目的访问路径（站点名）
         */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getProtocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//GET</span>
        <span class="token comment">//http://localhost:8080/servlet01/ser04</span>
        <span class="token comment">///servlet01/ser04</span>
        <span class="token comment">//username=zhangsan&amp;userPwd=123456</span>
        <span class="token comment">//HTTP/1.1</span>
        <span class="token comment">///servlet01</span>

        <span class="token comment">/**
         * 获取请求的参数
         *  1. 获取指定参数名的参数
         *  getParameter（&quot;参数名&quot;）
         *  注：
         *      1. 表单提交
         *          参数名表示的是表单元素的name属性值
         *      2. 地址栏输入
         *          参数名表示的是&quot;？键=值&amp;键=值&quot;中的键//?username=lisi&amp;userPwd=123456
         *  2. 获取指定参数名的所有参数值
         *  getParameterValue（&quot;参数名&quot;）
         */</span>
        <span class="token comment">//获取指定参数名的参数</span>
        <span class="token class-name">String</span> uname <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;姓名：&quot;</span> <span class="token operator">+</span> uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> upwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;密码：&quot;</span> <span class="token operator">+</span> upwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取指定参数名的所有参数值</span>
<span class="token comment">//        System.out.println(req.getParameterValues(&quot;hobby&quot;).length);</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>uname<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> upwd<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/**
             * 请求转发
             *      一种跳转方式
             *      1.只有一次请求
             *      2.服务端跳转
             *      3.地址栏不会改变
             *      4.数据可以共享
             */</span>
            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span>uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;index.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">/**
             *设置请求域，设置数据存放在作用域中，让客户端能够获取数据
             */</span>
            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;姓名或密码不正确&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;login.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br></div></div><h2 id="httpservletresponse对象"><a href="#httpservletresponse对象" class="header-anchor">#</a> HttpServletResponse对象</h2> <p>Web服务器收到客户端的http请求,会针对每一次请求， 分别创建一个用于 代表请求的request 对象和代表响应的response对象。</p> <p>request和response对象代表请求和响应:获取客户端数据,需要通过request对象;向客户端输出数据,需要通过response对象。</p> <p>HttpServletResponse的主要功能用于服务器对客户端的请求进行响应，将Web服务器处理后的结果返回给客户端。service()方法中形参 接收的是HttpServletResponse接口的实例化对象,这个对象中封装了向客户端发送数据、发送响应头,发送响应状态码的方法。</p> <h3 id="响应数据"><a href="#响应数据" class="header-anchor">#</a> 响应数据</h3> <p>接收到客户端请求后，可以通过HttpServletResponse对象直接进行响应，响应时需要获取输出流。有两种形式:</p> <p>getWriter()			获取字符流(只能响应回字符)</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//得到字符输出流</span>
<span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>getOutputStream()			获取字节流(能响应一切数据)</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//得到字节输出流</span>
<span class="token class-name">ServletOutputStream</span> servletOutputStream <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
servletOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
servletOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>响应回的数据到客户端被浏览器解析。</p> <p>注意:两者不能同时使用。</p> <h3 id="响应乱码问题"><a href="#响应乱码问题" class="header-anchor">#</a> 响应乱码问题</h3> <p>在响应中，如果我们响应的内容中含有中文,则有可能出现乱码。这是因为服务器响应的数据也会经过网络传输，服务器端有一种编码方式，在客户端也存在一种编码方式， 当两端使用的编码方式不同时则出现乱码。</p> <ol><li>getWriter()的字符乱码</li></ol> <p>对于getWriter()获取到的字符流，响应中文必定出乱码，由于服务器端在进行编码时默认会使用IS0-8859-1格式的编码，该编码方式并不支持中文,同时客户端与服务端的编码格式不一致。</p> <p>要解决该种乱码只能在服务器端告知服务器使用一种能够支持中文的编码格式，比如我们通常用的&quot;UTF-8&quot;。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时还只完成了一半的工作,要保证数据正确显示，还需要指定客户端的解码方式。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可同时指定服务器和客户端的编码格式</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token comment">//设置服务端编码</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置客户端的响应类型及编码</span>
        resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//或者同时设置两边编码格式（常用）</span>
       resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//得到字符输出流</span>
        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;中文&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="2"><li>getOutputStream(）的字符乱码</li></ol> <p>与getWriter()基本一致</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Servlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletOutputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * HttpServletResponse对象
 * 1. 响应数据
 *      1.字符输出流 getWriter()
 *      2.字节输出流 getOutputStream()
 *      两种流不能同时使用
 * 2. 响应乱码问题
 * 3. 重定向
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/ser05&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet05</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">/**
         *响应数据
         *      1.字符输出流 getWriter()
         *      乱码原因：对于getWriter()获取到的字符流，响应中文必定出乱码，由于服务器端在进行编码时默认会使用IS0-8859-1格式的编码，该编码方式并不支持中文。
         *      客户端与服务端的编码格式不一致
         *      2.字节输出流 getOutputStream()
         *      乱码原因：传输的是字节，如果客户端的与服务端的编码格式一致吗，不会乱码，否则会乱码
         *
         *      解决方案
         *          1. 设置编码格式支持中文
         *          2. 设置客户端与服务器编码格式一致
         *         //设置服务端编码
         *         resp.setCharacterEncoding(&quot;UTF-8&quot;);
         *         //设置客户端的响应类型及编码
         *         resp.setHeader(&quot;content-type&quot;,&quot;text/html;charset=UTF-8&quot;);
         *         //或者同时设置两边编码格式
         *         resp.setContentType(&quot;text/html;charset=UTF-8&quot;);
         */</span>
<span class="token comment">//        //设置服务端编码</span>
<span class="token comment">//        resp.setCharacterEncoding(&quot;UTF-8&quot;);</span>
<span class="token comment">//        //设置客户端的响应类型及编码</span>
<span class="token comment">//        resp.setHeader(&quot;content-type&quot;,&quot;text/html;charset=UTF-8&quot;);</span>
<span class="token comment">////        //或者同时设置两边编码格式</span>
<span class="token comment">////        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);</span>
<span class="token comment">//        //得到字符输出流</span>
<span class="token comment">//        PrintWriter writer = resp.getWriter();</span>
<span class="token comment">//        writer.write(&quot;hello&quot;);</span>
<span class="token comment">//        writer.write(&quot;&lt;h1&gt;中文&lt;/h1&gt;&quot;);</span>

        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//得到字节输出流</span>
        <span class="token class-name">ServletOutputStream</span> servletOutputStream <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        servletOutputStream.write(&quot;hi&quot;.getBytes());</span>
        servletOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;你好&lt;/h1&gt;&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h3> <p>重定向是一种服务器指导，客户端的行为(一种跳转方式)。客户端发出第一个请求 ,被服务器接收处理后，服务器会进行响应，在响应的同时，服务器会给客户端一个新的地址(下次请求的地址response.sendRedirect(url)；)当客户端接收到响应后，会立刻、马上、自动根据服务器给的新地址发起第二个请求，服务器接收请求并作出响应，重定向完成。</p> <p>从描述中可以看出重定向当中有两个请求存在，并且属于客户端行为。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//重定向跳转到index. jsp</span>
response <span class="token punctuation">.</span> <span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;index.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过观察浏览器我们发现第一次请求获得的响应码为302,并且含有一个location头信息。并且地址栏最终看到的地址是和第一次请求地址不同的，地址栏已经发生了变化。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/ser06&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet06</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Servlet06....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//获取指定参数名的参数</span>
        <span class="token class-name">String</span> uname <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;姓名：&quot;</span> <span class="token operator">+</span> uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> upwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;密码：&quot;</span> <span class="token operator">+</span> upwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uname<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> upwd<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/**
             * 重定向
             * 一种跳转方式
             * 1. 客户端跳转
             * 2. 地址栏发生了改变
             * 3. 存在两次请求
             * 4. request数据不能共享
             
             * 请求转发
             *一种跳转方式
             *1.服务端跳转
             *2.地址栏不会改变
             *3.只有一次请求
             *4.数据可以共享
             *
             * 请求转发只能跳转到当前站点下的资源，不可以跨域。重定向可以跳转任意资源
             */</span>
<span class="token comment">//            //设置request作用域</span>
<span class="token comment">//            req.setAttribute(&quot;username&quot;,uname);//request域中数据不共享，无法获取到username</span>
            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;index01.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;login01.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//请求转发</span>
        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//404,会从当前项目下查找指定路径</span>
        <span class="token comment">//重定向</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>$Title$<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>${username}欢迎登陆<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>用户登陆-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>get<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ser06<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  姓名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userPwd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>登陆<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="请求转发与重定向的区别"><a href="#请求转发与重定向的区别" class="header-anchor">#</a> 请求转发与重定向的区别</h3> <table><thead><tr><th>请求转发</th> <th>重定向</th></tr></thead> <tbody><tr><td>一次请求，数据在request域中共享</td> <td>两次请求，request域中数据不共享</td></tr> <tr><td>服务器端行为</td> <td>客户端行为</td></tr> <tr><td>地址栏不发生变化</td> <td>地址栏发生变化</td></tr> <tr><td>绝对地址定位到站点后</td> <td>绝对地址可写到http：//</td></tr></tbody></table> <p>两者都可进跳转，根据实际需求选取即可。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     *  servlet的跳转：请求转发、响应重定向
     *  区别：
     *  1.地址栏不同，请求转发地址不发生改变；响应重定向地址栏发生变化
     *  2.浏览器请求次数不同：
     *  请求转发：浏览器只发送一次请求，转发实在tomcat内部servlet自己进行转发
     *  响应重定向：浏览器发送了前后两次请求
     *  3.内部机制：图解
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取请求的用户名和密码</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断：用户名为admin且密码为123456登陆验证成功，跳转到页面</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span> password<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登陆成功，跳转到首页面&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//将用户名放到请求作用域中</span>
            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//请求转发  目标地址和响应对象</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/main&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//            //响应重定向</span>
<span class="token comment">//          resp.sendRedirect(&quot;/main&quot;);</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登陆失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//            resp.getWriter().println(&quot;登陆失败&quot;);</span>
            <span class="token comment">//失败页面跳转</span>
            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请求执行get处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;MainServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/main&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> req<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token string">&quot;&lt;h1 style='text-align:center;color:red'&gt;&quot;</span><span class="token operator">+</span>
                name<span class="token operator">+</span><span class="token string">&quot;进入首页面&lt;/h1&gt;&quot;</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;errorServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/error&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> errorServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1 style='text-align:center;color:red'&gt;用户登陆失败&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="cookie对象"><a href="#cookie对象" class="header-anchor">#</a> Cookie对象</h2> <p>Cookie是浏览器提供的一种技术，通过服务器的程序能将一些只须保存在客户端，或者在客户端进行处理的数据，放在本地的计算机上，不需要通过网络传输，因而提高网页处理的效率，并且能够减少服务器的负载，但是由于Cookie是服务器端保存在客户端的信息，所以其安全性也是很差的。例如常见的记住密码则可以通过Cookie来实现。</p> <p>有一个专门操作Cookie的类javax.servlet.http.Cookie。随着服务器端的响应发送给客户端，保存在浏览器。当下次再访问服务器时把cookie再带回服务器。</p> <p>Cookie的格式:键值对用“=”链接，多个键值对间通过“;”隔开。</p> <h3 id="cookie的创建与发送"><a href="#cookie的创建与发送" class="header-anchor">#</a> Cookie的创建与发送</h3> <p>通过newCookie(&quot;key&quot;,&quot;value&quot;)来创建一个Cookie对象，要想将Cookie随响应发送到客户端，需要先添加到response对象中，response.addCookie(cookie);此时该cookie对象则随着响应发送至客户端，在浏览器上可以看到。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token comment">//得到Cookie对象</span>
        <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//发送Cookie（将Cookie对象响应给客户端）</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="data:image/png;base64,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" alt="Cookie01.png"></p> <p><img src="data:image/png;base64,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" alt="Cookie02.png"></p> <h3 id="cookie的获取"><a href="#cookie的获取" class="header-anchor">#</a> Cookie的获取</h3> <p>在服务器端只提供一个getCookie（）的方法获取客户端传回的所有Cookie组成的一个数组，如果需要获取单个cookie则需通过遍历，getName（）获取Cookie的名称，getValue（）获取Cookie的值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//获取所有Cookie对象</span>
<span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//判断后遍历</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> cookies<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span>cookies<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name:&quot;</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;value:&quot;</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//获取指定name的cookie对象</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;值为:&quot;</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="cookie设置到期时间"><a href="#cookie设置到期时间" class="header-anchor">#</a> Cookie设置到期时间</h3> <p>cookie默认是关闭浏览器失效，与服务器是否关闭无关</p> <p>通过setMaxAge（）设置cookie的失效时间</p> <ol><li>正整数
表示cookie存活指定秒数</li> <li>负数
cookie只在浏览器中存活，浏览器关闭即失效，默认值为-1</li> <li>0
删除cookie</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * cookie的失效时间
 *    cookie默认是关闭浏览器失效，与服务器是否关闭无关
 *    通过setMaxAge（）设置cookie的失效时间
 *    1. 正整数
 *          表示cookie存活指定秒数
 *    2. 负数
 *          cookie只在浏览器中存活，浏览器关闭即失效，默认值为-1
 *    3. 0
 *          删除cookie
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/cook03&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cook03</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//得到Cookie对象</span>
        <span class="token class-name">Cookie</span> cookie1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;uname1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zahngsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//正整数,存活20秒</span>
        cookie1<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//发送Cookie（将Cookie对象响应给客户端）</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//得到Cookie对象</span>
        <span class="token class-name">Cookie</span> cookie2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;uname2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//cookie只在浏览器中存活，浏览器关闭即失效，默认值为-1</span>
        cookie2<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//发送Cookie（将Cookie对象响应给客户端）</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//得到Cookie对象</span>
        <span class="token class-name">Cookie</span> cookie3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;uname3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//立刻删除</span>
        cookie3<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//发送Cookie（将Cookie对象响应给客户端）</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie3<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//删除已有的cookie对象</span>
        <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="cookie的注意点"><a href="#cookie的注意点" class="header-anchor">#</a> Cookie的注意点</h3> <ul><li>Cookie保存在当前浏览器中。</li></ul> <p>在一般的站点中常常有记住用户名这样一个操作， 该操作只是将信息保存在本机上，换电脑以后这些信息就无效了。而且cookie还不能跨浏览器。</p> <ul><li>Cookie存中文问题</li></ul> <p>Cookie中不能出现中文，如果有中文则通过URL Encoder. encode()来进行编码，获取时通过URLDecoder.decode()来进行解码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;名字&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>同名cookie问题</li></ul> <p>如果服务器端发送重名的cookie那么会覆盖原有的cookie</p> <ul><li>浏览器存放cookie的数量</li></ul> <p>不同的浏览器对cookie也有限定，cookie的存储是有上限的。cookie是存储在客户端（浏览器）的，而且一般是由服务器端创建和设定。后期结合Session来实现回话跟踪</p> <h3 id="cookie的路径"><a href="#cookie的路径" class="header-anchor">#</a> Cookie的路径</h3> <p>当访问的路径中包含cookie的path时，就可以获取到当前cookie对象</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/cook02&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/cook&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/* 省略 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Cookie的路径
 *      1. 在当前项目下的资源可以获取
 *      2. 在当前服务器的资源可以获取
 *      3. 在指定项目下的资源可以访问
 *      4. 在指定路径的资源可以访问
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/cook05&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cook05</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1. 在当前项目下的资源可以获取</span>
        <span class="token class-name">Cookie</span> cookie01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookie01<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie01<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 在当前服务器的资源可以获取</span>
        <span class="token class-name">Cookie</span> cookie02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookie02<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie02<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3. 在指定项目下的资源可以访问</span>
        <span class="token class-name">Cookie</span> cookie03 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;a3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookie03<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie03<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 在指定路径的资源可以访问</span>
        <span class="token class-name">Cookie</span> cookie04 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;a4&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookie04<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/servlet02/cook&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie04<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="httpsession对象"><a href="#httpsession对象" class="header-anchor">#</a> HttpSession对象</h2> <p>HttpSession对象是javax.servlet.http.HttpSession的实例，该接口并不像HttpServletRequest或
HttpServletResponse还存在一个父接口，该接口只是。个纯粹的接口。这因为session本身就属于HTTP协议的范畴。</p> <p>对于服务器而言，每一个连接到它的客户端都是一个session，servlet容器使用此接口创建HTTP客户端和HTTP服务器之间的会话。会话将保留指定的时间段，跨多个连接或来自用户的页面请求。一个会话通常对应于一个用户，该用户可能多次访问一个站点。可以通过此接口查看和操作有关某个会话的信息，比如会话标识符、创建时间和最后一次访问时间。在整个session中，最重要的就是属性的操作。</p> <p>session无论客户端还是服务器端都可以感知到，若重新打开一个新的浏览器，则无法取得之前设置的session，因为每一个session只保存在当前的浏览器当中，并在相关的页面取得。</p> <p>Session 的作用就是为了标识一次会话，或者说确认一个用户;并且在一次会话（一个用户的多次请求）期间共享数据。我们可以通过request.getSession()方法，来获取当前会话的session对象。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//如果session对象存在，则获取；如果session对象不存在，则创建</span>
<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="标识符jsessionid"><a href="#标识符jsessionid" class="header-anchor">#</a> 标识符JSESSIONID</h3> <p>Session既然是为了标识一次会话，那么此次会话就应该有一个唯一的标志，这个标志就是sessionld</p> <p>每当一次请求到达服务器，如果开启了会话(访问了session)，服务器第一步会查看是否从客户端回传一个名为JSESSIONID的cookie，如果没有则认为这是一次新的会话，会创建一个新的session对象，并用唯一的sessionld为此次会话做一个标志。如果有JESSIONID这个cookie回传，服务器则会根据JSESSIONID这个值去查看是否含有id为JSESSION值的session对象，如果没有则认为是一个新的会话，重新创建一个新的session对象，并标志此次会话;如果找到了相应的session对象，则认申是之前标志过的一次会话，返回该session对象，数据达到共享。</p> <p>这里提到一个叫做JSESSIONID的cookie，这是一个比较特殊的cookie，当用户请求服务器时，如果访问了session，则服务器会创建一个名为JSESSIONID，值为获取到的session(无论是获取到的还是新创建的）的sessionld的cookie对象，并添加到response对象中，响应给客户端，有效时间为关闭浏览器。
所以Session的底层依赖cookie来实现。</p> <h3 id="session域对象"><a href="#session域对象" class="header-anchor">#</a> session域对象</h3> <p>Session用来表示一次会话，在一次会话中数据时可共享的。这时session作为域对象存在，可以通过setAttribute（name，value）方法向域对象中添加数据，通过getAttribute（name）从域对象中获取数据，通过removeAttribute（name）从域对象中移除数据。</p> <h3 id="session对象的销毁"><a href="#session对象的销毁" class="header-anchor">#</a> session对象的销毁</h3> <ul><li>默认到期时间</li></ul> <p>当客户端第一次请求servlet并且操作session时，session对象生成，Tomcat中session默认的存活时间为30min，即不操作页面的时间，一旦有操作，session会重新计时。</p> <p>可以在Tomcat中的conf目录下的web.xml文件中进行修改</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>自己设定到期时间</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token keyword">int</span> sec <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>手动销毁</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;/sess01&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Session01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//session对象的获取，如果存在，直接获取，不存在则新建</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//JSESSIONID标识符</span>
        <span class="token comment">//当请求到达服务器时，如果使用了session，服务器会去获取一个JSESSIONID的cookie对象</span>
        <span class="token comment">//如果cookie对象不存在，则新建session对象，并设置sessionId，将sessionId回传给客户端，设置对应的cookie</span>
        <span class="token comment">//如果cookie对象存在，服务器会比较客户端传递的sessionId是否一致</span>
        <span class="token comment">//  如果不一致，新建session对象，并设置session，将sessionId回传给客户端，重新设置对应的cookie</span>
        <span class="token comment">//  如果一致，则获取到当前的session对象</span>
        <span class="token comment">//session底层依赖cookie</span>
        <span class="token comment">//默认关闭浏览器失效</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SessionId&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;会话创建时间&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getCreationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;最后一次访问时间&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getLastAccessedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;是否是新的对象&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//session作用域</span>
        <span class="token comment">//一次会话中有效，可以有多次请求和响应，在会话中数据共享</span>
        <span class="token comment">//setAttribute（）、getAttribute（）、removeAttribute（）</span>
        <span class="token comment">//设置request作用域</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置session作用域</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;session&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        //请求转发（一次请求）</span>
<span class="token comment">//        req.getRequestDispatcher(&quot;sess02&quot;).forward(req,resp);</span>
        <span class="token comment">//重定向（两次请求）</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;sess02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * request作用域
         *      一次请求中有效，在请求转发中有效，重定向失效
         * session作用域
         *      一次会话中有效，无论请求转发还是重定向都有效，会话摧毁则失效
         */</span>

        <span class="token comment">//session摧毁</span>
        <span class="token comment">//1. 关闭服务器（非正常）</span>
        <span class="token comment">//2. 关闭浏览器</span>
        <span class="token comment">//      session底层依赖cookie，cookie默认只在浏览器中存活，浏览器关闭则失效</span>
        <span class="token comment">//3. 默认不活动时间</span>
        <span class="token comment">//当指定时间内没有任何操作，则session对象失效；在时间未到达之前，则会重新计时</span>
        <span class="token comment">//服务器中设定了session的最大不活动时间，Tomcat服务器设置的是30分钟</span>
        <span class="token comment">//在Tomcat的目录中web.xml修改</span>
        <span class="token comment">/**
         *         &lt;session-config&gt;
         *                 &lt;session-timeout&gt;30&lt;/session-timeout&gt;
         *         &lt;/session-config&gt;
         */</span>
        <span class="token comment">//4. 手动设置失效时间</span>
        <span class="token comment">//int sec = session.getMaxInactiveInterval();</span>
        <span class="token comment">//session.setMaxInactiveInterval(20);</span>

        <span class="token comment">//5. 手动销毁</span>
        <span class="token comment">//session.invalidate();</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;/sess02&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Session02</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sessionid02&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取作用域</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取最大不活动时间</span>
        <span class="token keyword">int</span> sec <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//手动销毁</span>
        session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="servletcontext对象"><a href="#servletcontext对象" class="header-anchor">#</a> ServletContext对象</h2> <p>每一个web应用都有且仅有一个ServletContext对象，又称Application对象，从名称中可知，该对象是与应用程序相关的。在WEB容器启动的时候，会为每一个WEB应用程序创建一个对应的ServletContext对象。</p> <p>该对象有两大作用，第一、作为域对象用来共享数据，此时数据在整个应用程序中共享;第二、该对象中保存了当前应用程序相关信息。例如可以通过getServerIlnfo()方法获取当前服务器信息，getRealPath(String path)获取资源的真实路径等。</p> <h3 id="servletcontext对象的获取"><a href="#servletcontext对象的获取" class="header-anchor">#</a> ServletContext对象的获取</h3> <ul><li>通过request对象获取</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>通过session对象获取</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ServletContext</span> servletContext1 <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>通过servletConfig获取，在Servlet标准中提供了ServletConfig方法</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ServletContext</span> servletContext2 <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>直接获取，Servlet类中提供了直接获取ServletContext对象的方法</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ServletContext</span> servletContext3 <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="常用方法-2"><a href="#常用方法-2" class="header-anchor">#</a> 常用方法</h3> <ul><li>获取项目的正式路径</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> realPath <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>获取服务器的版本信息</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> serverInfor <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServerInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <p>整个应用程序中都有效，服务器关闭失效</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/con01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//ServletContext对象的获取</span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ServletContext</span> servletContext1 <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ServletContext</span> servletContext2 <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ServletContext</span> servletContext3 <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取项目的真实路径</span>
        <span class="token class-name">String</span> realPath <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取服务器版本信息</span>
        <span class="token class-name">String</span> serverInfor <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServerInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>serverInfor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//作用域</span>
        <span class="token comment">//整个应用程序中都有效，服务器关闭失效</span>
        <span class="token comment">/**
         * setAttribute（）
         * getAttribute()
         * removeAttribute()
         */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="servlet的三大域对象"><a href="#servlet的三大域对象" class="header-anchor">#</a> Servlet的三大域对象</h3> <ol><li>request作用域</li></ol> <p>在一次请求中有效，请求转发</p> <ol start="2"><li>session作用域</li></ol> <p>再一次会话中有效，可以有多次请求，无论是请求转发或重定向，session销毁后失效</p> <ol start="3"><li>servletContext作用域</li></ol> <p>在整个应用程序中有效，服务器关闭失效</p> <h2 id="文件上传"><a href="#文件上传" class="header-anchor">#</a> 文件上传</h2> <p>文件上传涉及到前台页面的编写和后台服务器端代码的编写，前台发送文件，后台接收并保存文件。</p> <h3 id="前台页面"><a href="#前台页面" class="header-anchor">#</a> 前台页面</h3> <p>form表单，请求方式为post，enctype设置为“multipart/form-data”，意思为设置表单的类型为文件上传表单。默认情况下这个表单类型是“application/x-www-form-urlencoded”，不能上传文件，需使用multipart/form-data。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uploadServlet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myfile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="后台实现"><a href="#后台实现" class="header-anchor">#</a> 后台实现</h3> <p>使用注解@MultipartConfig将一个Servlet标识为支持文件上传。Servlet将multiplart/form-data的post请求封装成part，通过part对上传的文件进行操作。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;/sess02&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Session02</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sessionid02&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取作用域</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取最大不活动时间</span>
        <span class="token keyword">int</span> sec <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//手动销毁</span>
        session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><img src="data:image/png;base64,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" alt="upload.png"></p> <h2 id="文件下载"><a href="#文件下载" class="header-anchor">#</a> 文件下载</h2> <h3 id="超链接下载"><a href="#超链接下载" class="header-anchor">#</a> 超链接下载</h3> <p>当超链接遇到浏览器不能识别的资源时会自动下载；当遇到能直接显示的资源时，浏览器会默认显示出来。也可以通过download属性规定浏览器进行下载。</p> <ul><li>默认下载</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 当超链接遇到浏览器不能识别的资源时，会自动下载 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.zip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>超链接下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>指定download下载</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.txt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">download</span><span class="token punctuation">&gt;</span></span>超链接下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>download属性可以不写任何信息，会自动使用默认文件名。如果设置了download属性的值，则使用设置的值作为文件名。当用户打开浏览器点击链接时会直接下载</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>超链接下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>浏览器可以识别的资源<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>HTML页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>txt文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>R-C.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>浏览器无法识别的资源<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cf.lnk<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>快捷方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>download属性<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">download</span><span class="token punctuation">&gt;</span></span>HTML页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.txt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">download</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo.txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>txt文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="后台实现下载"><a href="#后台实现下载" class="header-anchor">#</a> 后台实现下载</h3> <ul><li>需要通过response.setContentType方法设置Content-type头字段的值，为浏览器无法使用某种方式或激活某个程序来处理的MIME类型，例如&quot;application/octet- stream&quot;或&quot;application/x-msdownload&quot;等。</li> <li>需要通过response.setHeader方法设置Content-Disposition头的值为&quot;attachment;ilename=文件名&quot;</li> <li>读取下载文件，调用response.getOutputStream方法向客户端写入附件内容。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletOutputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/downloadServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> downServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//设置编码格式</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//接收要下载的文件名</span>
        <span class="token class-name">String</span> fileName <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;fileName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断文件名是否为空</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入要下载的文件名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//得到文件存放路径</span>
        <span class="token class-name">String</span> filePath <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过路径得到file对象</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断文件是否是一个标准文件</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//设置响应类型（浏览器无法使用某种方式或激活某个程序来处理的类型）</span>
            resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/x-msdownload&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//设置头信息</span>
            resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;attachment;filename&quot;</span><span class="token operator">+</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//得到文件输入流</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//得到字节输出流</span>
            <span class="token class-name">ServletOutputStream</span> servletOutputStream <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//定义byte数组</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">//定义长度</span>
            <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">//循环 输出</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                servletOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chars<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//关闭输入流输出流</span>
            inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            servletOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;下载的文件不存在！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>文件下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>downloadServlet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    文件名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-cb1513f6></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.b77bd91d.js" defer></script><script src="/assets/js/5.95fafd89.js" defer></script><script src="/assets/js/1.8004d325.js" defer></script><script src="/assets/js/22.4e08b6fc.js" defer></script>
  </body>
</html>
